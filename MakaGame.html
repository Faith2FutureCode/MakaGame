<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MakaMoba â€“ Map & Click-to-Move</title>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
      }
    }
  </script>
  <style>
    :root {
      --map-w: 5000;   /* image width (updated at runtime) */
      --map-h: 5000;   /* image height (updated at runtime) */
      --camera-w: 1920;
      --camera-h: 1080;
      --sidebar-w: 280px;
      --sidebar-w-collapsed: 60px;
      --hud-corner-scale: 1;
      --hud-score-scale: 1;
      --hud-timer-scale: 1;
      --hud-stats-scale: 1;
      --menu-width-px: 0px;
      --minimap-scale: 1;
      --cursor-hover-color: #7fe3ff;
    }

    html, body { height: 100%; margin: 0; background:#0e1520; color:#e6edf3; font:14px/1.3 system-ui, sans-serif; }
    .app {
      position: relative;
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      transition: grid-template-columns 0.25s ease;
    }
    .app[data-collapsed="true"] { grid-template-columns: var(--sidebar-w-collapsed) 1fr; }
    .app[data-hidden="true"] { grid-template-columns: 0 1fr; }

    /* === Sidebar (ChatGPT-like) === */
    .sidebar {
      position: relative;
      background: #0b1220;
      border-right: 1px solid #22314c;
      display: flex;
      flex-direction: column;
      min-width: 0;
      min-height: 0;
      transition: opacity 0.2s ease;
      z-index: 80;
    }
    .app[data-hidden="true"] .sidebar { opacity: 0; pointer-events: none; }
    .sb-header { display:flex; align-items:center; gap:8px; padding:10px 16px; border-bottom:1px solid #22314c; background:#0c1628; }
    .sb-title { font-weight:600; color:#cfe3ff; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .sb-toggle {
      position:fixed;
      top:50%;
      left:calc(var(--menu-width-px, 0px));
      transform:translateY(-50%);
      border:0;
      background:#16233c;
      color:#cfe3ff;
      width:48px;
      height:92px;
      border-radius:0 999px 999px 0;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
      box-shadow:0 16px 36px rgba(4,12,24,0.45);
      transition:background 0.2s ease, color 0.2s ease;
      z-index:90;
    }
    .sb-toggle:hover { background:#1d2f4f; color:#e1ecff; }
    .sb-toggle:focus-visible {
      outline:2px solid #4da1ff;
      outline-offset:4px;
    }
    .sb-hide-icon {
      display:block;
      width:0;
      height:0;
      border-top:14px solid transparent;
      border-bottom:14px solid transparent;
      border-right:20px solid currentColor;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.35));
    }
    .app[data-collapsed="true"] #sbHide,
    .app[data-hidden="true"] #sbHide { display:none; }
    .sb-content { padding:10px; padding-bottom:80px; overflow-y:auto; overflow-x:hidden; display:grid; gap:8px; flex:1 1 auto; min-height:0; }
    .app[data-collapsed="true"] .sb-title,
    .app[data-collapsed="true"] .hint,
    .app[data-collapsed="true"] .subhint,
    .app[data-collapsed="true"] .submenu.open,
    .app[data-collapsed="true"] .fileNameWrap { display:none; }
    .sb-genre { display:flex; flex-direction:column; gap:6px; padding:4px 0 2px; }
    .sb-genre label { font-size:11px; letter-spacing:0.4px; text-transform:uppercase; color:#9ab; }
    .sb-genre select {
      background:#0e1a31;
      border:1px solid #2a3756;
      border-radius:8px;
      color:#e6edf3;
      padding:6px 8px;
      font-size:13px;
    }
    .genre-hidden { display:none !important; }

    /* Buttons/inputs inside sidebar */
    .btn { display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 10px; border-radius:10px; border:1px solid #2a3756; background:#0e1a31; color:#e6edf3; cursor:pointer; }
    .btn:active { transform: translateY(1px); }
    .hint { font-size:12px; color:#9ab; }
    .submenu { display:none; padding-top:6px; margin-top:4px; border-top:1px solid #22314c; }
    .submenu.open { display:block; }
    .subbtn { display:block; width:100%; padding:8px 10px; margin-top:6px; border-radius:10px; border:1px solid #2a3756; background:#0f1f39; color:#e6edf3; cursor:pointer; text-align:left; }
    .subhint { font-size:12px; color:#9ab; margin-top:6px; }
    .formrow { display:grid; grid-template-columns: 1fr auto; align-items:center; gap:8px; margin-top:8px; }
    .formrow label { font-size:12px; color:#9ab; }
    .formrow input { width:110px; padding:6px 8px; background:#0e1a31; color:#e6edf3; border:1px solid #2a3756; border-radius:8px; }
    .formrow .rangeWrap { display:flex; align-items:center; gap:8px; }
    .formrow .rangeWrap input { width:120px; text-align:right; }
    .formrow .rangeValue { min-width:52px; text-align:right; font-size:12px; color:#9ab; }
    .formButton { padding:6px 12px; border-radius:8px; border:1px solid #2a3756; background:#0e1a31; color:#e6edf3; cursor:pointer; font-size:13px; }
    .formButton.is-active { background:#173052; border-color:#3a5a88; color:#e0f1ff; }
    .formButton:focus-visible { outline:2px solid #4da1ff; outline-offset:2px; }

    .colliderList {
      margin-top:6px;
      border:1px solid #22314c;
      border-radius:10px;
      background:#0f1f39;
      max-height:200px;
      overflow:auto;
      padding:6px;
      display:grid;
      gap:6px;
    }
    .colliderEntry {
      padding:6px 10px;
      border-radius:8px;
      border:1px solid transparent;
      background:#152444;
      color:#e6edf3;
      cursor:pointer;
      text-align:left;
      font-size:13px;
      transition:border-color 0.15s ease, background 0.15s ease;
    }
    .colliderEntry:hover { background:#192c51; }
    .colliderEntry.is-active {
      border-color:#4da1ff;
      background:#1e3866;
      box-shadow:0 0 0 1px #4da1ff44;
    }
    .colliderListEmpty {
      padding:8px 10px;
      border-radius:8px;
      background:#0e1d33;
      color:#9ab;
      font-size:12px;
      text-align:center;
    }

    .playerStateConfigList {
      display:grid;
      gap:8px;
      margin-top:6px;
    }
    .playerStateConfigRow {
      display:grid;
      gap:8px;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid #22314c;
      background:#0f1f39;
    }
    .playerStateConfigHeader {
      font-size:13px;
      font-weight:600;
      color:#cfe3ff;
      letter-spacing:0.3px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .playerStateConfigInputs {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap:10px;
      align-items:center;
    }
    .playerStateConfigInputs label {
      display:grid;
      gap:4px;
      font-size:11px;
      color:#9ab;
    }
    .playerStateConfigInputs input[type="text"] {
      padding:6px 8px;
      border-radius:8px;
      border:1px solid #2a3756;
      background:#0e1a31;
      color:#e6edf3;
    }

    .laneOffsetList {
      display:grid;
      gap:6px;
      margin-top:6px;
    }
    .laneDistanceNote {
      font-size:12px;
      color:#9ab;
      margin-left:10px;
      white-space:nowrap;
    }
    #multiTeamColors {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      max-width:100%;
    }
    #multiTeamColors input[type="color"] {
      width:32px;
      height:32px;
      padding:0;
      border:1px solid #2a3756;
      border-radius:8px;
      background:#0e1a31;
      flex:0 0 auto;
    }

    /* Animation editor */
    .playerAnimationSection { display:grid; gap:12px; padding:12px; border-radius:12px; border:1px solid #22314c; background:#101c33; box-shadow:inset 0 0 0 1px rgba(15,27,47,0.35); }
    .playerAnimationSection[hidden] { display:none; }
    .playerAnimationButtons { display:flex; gap:8px; flex-wrap:wrap; }
    .playerAnimationButtons .formButton { flex:1 1 auto; min-width:140px; text-align:center; }
    #playerAnimationFile { display:none; }
    .playerAnimationStatus { font-size:12px; color:#9ab; }
    .playerAnimationStage { position:relative; height:220px; border-radius:12px; border:1px solid #22314c; background:transparent; overflow:hidden; width:100%; }
    .playerAnimationStage canvas { display:block; width:100%; height:100%; }
    .playerAnimationDrop { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#9ab; font-size:13px; letter-spacing:.2px; background:rgba(7,14,25,0.78); opacity:0; pointer-events:none; transition:opacity 0.18s ease; }
    .playerAnimationStage[data-drop="true"] .playerAnimationDrop { opacity:1; pointer-events:auto; }
    .playerAnimationActions { display:grid; gap:12px; }
    .playerAnimationActionBlock { display:grid; gap:8px; padding:10px; border-radius:12px; border:1px solid #22314c; background:#0f1f39; }
    .playerAnimationActionBlock > label { font-size:12px; color:#cfe3ff; margin-bottom:2px; }
    .playerAnimationActionBlock select { width:100%; padding:6px 8px; background:#0e1a31; color:#e6edf3; border:1px solid #2a3756; border-radius:8px; }
    .playerAnimationActionSettings { display:grid; gap:8px; padding:8px; border-radius:10px; border:1px solid #1c2944; background:#0d182d; }
    .playerAnimationActionSettingsRow { display:grid; gap:8px; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
    .playerAnimationActionSetting { display:grid; gap:4px; }
    .playerAnimationActionSetting label { font-size:11px; color:#9ab; }
    .playerAnimationActionSetting input { width:100%; padding:6px 8px; background:#0e1a31; color:#e6edf3; border:1px solid #2a3756; border-radius:8px; }
    .playerAnimationActionSetting input:disabled { opacity:0.45; cursor:not-allowed; }
    .playerAnimationMaterials { display:grid; gap:8px; max-height:180px; overflow:auto; padding-right:2px; }
    .playerAnimationMat { display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; padding:6px 8px; border-radius:10px; border:1px solid #2a3756; background:#0f1f39; }
    .playerAnimationMat label { font-size:12px; color:#cfe3ff; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .playerAnimationMat input[type="color"] { width:44px; height:28px; border:0; padding:0; background:transparent; cursor:pointer; }
    .playerAnimationViewControls { display:grid; gap:8px; }
    .playerAnimationViewControls .formrow { grid-template-columns: 1fr auto; }
    .playerAnimationViewControls input[type="number"] { width:90px; text-align:right; }
    .playerAnimationScaleRow .rangeWrap { display:flex; align-items:center; gap:8px; }
    .playerAnimationScaleRow .rangeWrap input:first-of-type { flex:1 1 auto; min-width:140px; }
    .playerAnimationScaleRow .rangeWrap input:last-of-type { width:80px; flex:0 0 auto; }
    .playerAnimationOffsetRow input[type="number"] { width:110px; text-align:right; }

    .settingHelp {
      position:sticky;
      bottom:0;
      margin-top:8px;
      padding:12px;
      border-radius:12px;
      background:#101c33;
      border:1px solid #22314c;
      box-shadow:inset 0 0 0 1px rgba(15,27,47,0.35);
      color:#cfe3ff;
      font-size:13px;
      line-height:1.45;
      opacity:0;
      transform:translateY(8px);
      transition:opacity 0.18s ease, transform 0.18s ease;
      pointer-events:none;
    }
    .settingHelp.show {
      opacity:1;
      transform:translateY(0);
      pointer-events:auto;
    }
    .settingHelpTitle { display:block; font-weight:600; margin-bottom:4px; color:#f0f6ff; font-size:13px; letter-spacing:0.2px; }
    .settingHelpBody { display:block; color:#9ab6d9; font-size:12px; }

    .fileNameWrap { display:flex; gap:8px; align-items:center; }
    .fileNameWrap .dot { width:8px; height:8px; border-radius:999px; background:#6b7280; }
    .fileNameWrap.loaded .dot { background:#22c55e; }

    /* Main stage */
    .main { position: relative; overflow:hidden; }
    .stage { position:relative; width: calc(var(--camera-w) * 1px); height: calc(var(--camera-h) * 1px); user-select:none; overflow:hidden; margin: 0 auto; }
    .stage[data-cursor-enabled="true"] { cursor:none; }
    .stageCursor {
      position:absolute;
      top:0;
      left:0;
      width:38px;
      height:38px;
      border-radius:50%;
      border:2px solid var(--cursor-hover-color);
      background:rgba(10,18,32,0.65);
      color:var(--cursor-hover-color);
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      transform:translate(-50%, -50%);
      opacity:0;
      transition:opacity 0.12s ease, transform 0.08s ease;
      font-size:18px;
      font-weight:600;
      text-shadow:0 0 10px rgba(127,227,255,0.65);
      box-shadow:0 0 12px rgba(127,227,255,0.25), 0 6px 18px rgba(4,12,24,0.55);
      z-index:45;
    }
    .stageCursor[data-visible="true"] { opacity:1; }
    .hudOverlay {
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:30;
    }
    .hudOverlay > * { pointer-events:auto; }
    .view { position:absolute; top:0; left:0; width: calc(var(--map-w) * 1px); height: calc(var(--map-h) * 1px); transform-origin: top left; }
    #hitbox { position:absolute; inset:0; width:100%; height:100%; display:block; opacity:0; pointer-events:none; }
    #map { position:absolute; inset:0; width:100%; height:100%; display:block; }
    #layer {
      position:absolute;
      inset:0;
      width: calc(var(--camera-w) * 1px);
      height: calc(var(--camera-h) * 1px);
      display:block;
      transform-origin: top left;
    }
    #minimap {
      position:fixed;
      left:0;
      top:0;
      width: calc(220px * var(--minimap-scale));
      height: calc(220px * var(--minimap-scale));
      background:rgba(8,16,30,0.85);
      border:1px solid #2a3756;
      border-radius: calc(12px * var(--minimap-scale));
      box-shadow:0 12px 24px rgba(0,0,0,0.45);
      pointer-events:auto;
      touch-action:none;
      cursor:pointer;
      z-index:40;
      transform: translate(var(--ui-pos-x, 0px), var(--ui-pos-y, 0px))
                  translate(var(--ui-anchor-x, 0%), var(--ui-anchor-y, 0%));
      transform-origin: top left;
    }
    #minimap[data-clickthrough="true"],
    #minimap[data-click-to-move="false"] {
      cursor:default;
    }

    .hudStatsDock {
      display:flex;
      flex-direction:row;
      align-items:stretch;
      justify-content:center;
      gap:0;
      pointer-events:auto;
      min-width:0;
    }
    .hudStatsDock[data-orientation="vertical"] {
      flex-direction:column;
      width:100%;
    }
    .hudVitals {
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:160px;
      width:100%;
    }
    .hudAbilityStack[data-orientation="vertical"] .hudVitals {
      width:auto;
      min-width:0;
      align-items:center;
    }
    .hudVitalsBar {
      position:relative;
      height:16px;
      border-radius:999px;
      background:#091625;
      border:1px solid #2a3a5a;
      overflow:hidden;
      box-shadow:inset 0 0 12px rgba(0,0,0,0.55);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0 8px;
    }
    .hudVitalsBar[data-orientation="vertical"] {
      width:24px;
      height:var(--hud-health-vertical-height, 160px);
      padding:8px 0;
      overflow:visible;
      margin-bottom:12px;
    }
    .hudVitalsBar[data-orientation="vertical"][data-text-placement="top"] {
      margin-top:0;
      margin-bottom:12px;
    }
    .hudVitalsBar[data-orientation="vertical"][data-text-placement="bottom"] {
      margin-top:12px;
      margin-bottom:0;
    }
    .hudHealthFill {
      position:absolute;
      inset:0;
      width:100%;
      background:linear-gradient(90deg, #3bff9c, #1ec4ff);
      transition:width 0.2s ease, height 0.2s ease;
    }
    .hudHealthFill[data-orientation="vertical"] {
      top:auto;
      bottom:0;
      height:100%;
      background:linear-gradient(to top, #3bff9c, #1ec4ff);
    }
    .hudVitals[data-team="red"] .hudHealthFill {
      background:linear-gradient(90deg, #ff6f91, #ffb36b);
    }
    .hudVitals[data-team="red"] .hudHealthFill[data-orientation="vertical"] {
      background:linear-gradient(to top, #ff6f91, #ffb36b);
    }
    .hudHpText {
      position:relative;
      z-index:1;
      font-size:13px;
      font-weight:600;
      letter-spacing:0.4px;
      color:#fff;
      text-shadow:0 1px 2px rgba(0,0,0,0.6);
      pointer-events:none;
    }
    .hudHpText[data-orientation="vertical"] {
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:0;
      bottom:auto;
      writing-mode:horizontal-tb;
      text-orientation:initial;
      letter-spacing:0.3px;
      font-size:12px;
      line-height:1.1;
      white-space:nowrap;
      text-align:center;
    }
    .hudStatLine {
      font-size:12px;
      color:#9ab;
      letter-spacing:0.2px;
    }
    .hudStatsAbilityGroup {
      display:flex;
      align-items:stretch;
      gap:0;
      pointer-events:auto;
      border-radius:18px;
      background:rgba(7,15,29,0.9);
      border:1px solid #23324c;
      box-shadow:0 18px 40px rgba(0,0,0,0.5);
      backdrop-filter:blur(6px);
      overflow:hidden;
    }
    .hudStatsAbilityGroup[data-orientation="vertical"] {
      flex-direction:column;
      align-items:stretch;
    }
    .hudStatsAbilityGroup[data-orientation="vertical"] .hudAbilityDock {
      width:100%;
    }
    .hudStatsAbilityGroup[data-orientation="vertical"][data-vertical-placement="bottom"] .hudStatsDock {
      order:1;
    }
    .hudStatsAbilityGroup[data-orientation="vertical"][data-vertical-placement="bottom"] .hudAbilityDock {
      order:0;
    }
    .hudStatsPanel {
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      gap:8px;
      padding:12px 14px;
      background:linear-gradient(180deg, rgba(11,22,40,0.88), rgba(8,16,30,0.92));
      border-right:1px solid rgba(35,50,76,0.9);
      color:#cfe3ff;
      flex:1 1 auto;
      width:fit-content;
      min-width:0;
      min-height:calc(48px * var(--ability-scale, 1) + 8px);
      align-self:stretch;
    }
    .hudStatsDock[data-orientation="vertical"] .hudStatsPanel {
      width:100%;
      border-right:0;
    }
    .hudStatsDock[data-orientation="vertical"][data-vertical-placement="top"] .hudStatsPanel {
      border-bottom:1px solid rgba(35,50,76,0.9);
    }
    .hudStatsDock[data-orientation="vertical"][data-vertical-placement="bottom"] .hudStatsPanel {
      border-top:1px solid rgba(35,50,76,0.9);
    }
    .hudStatsContent {
      display:grid;
      grid-template-columns:repeat(2, max-content);
      gap:2px 10px;
      align-content:center;
      justify-content:center;
    }
    .hudStatsDock[data-collapsed="true"] .hudStatsContent {
      display:none;
    }
    .hudStatsDock[data-collapsed="true"] .hudStatsPanel {
      display:none;
      gap:0;
      padding:0;
      justify-content:center;
      min-height:0;
      border:0;
    }
    .hudStat {
      display:flex;
      flex-direction:column;
      gap:1px;
      min-width:0;
    }
    .hudStatLabel {
      font-size:11px;
      letter-spacing:0.3px;
      text-transform:uppercase;
      color:#8ea0c2;
      line-height:1.1;
    }
    .hudStatValue {
      font-size:13px;
      font-weight:600;
      letter-spacing:0.3px;
      color:#e6efff;
      line-height:1.15;
    }
    .hudStatsToggle {
      border:0;
      background:rgba(10,20,34,0.75);
      border-radius:0;
      width:36px;
      height:36px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#9ab9de;
      cursor:pointer;
      transition:background 0.2s ease, color 0.2s ease;
      flex:0 0 auto;
      box-shadow:none;
    }
    .hudStatsDock[data-orientation="horizontal"] .hudStatsToggle {
      border-right:1px solid rgba(35,50,76,0.9);
    }
    .hudStatsDock[data-orientation="vertical"] .hudStatsToggle {
      width:100%;
      border-right:0;
    }
    .hudStatsDock[data-orientation="vertical"][data-vertical-placement="top"] .hudStatsToggle {
      border-bottom:1px solid rgba(35,50,76,0.9);
    }
    .hudStatsDock[data-orientation="vertical"][data-vertical-placement="bottom"] .hudStatsToggle {
      border-top:1px solid rgba(35,50,76,0.9);
    }
    .hudStatsToggle:hover {
      background:rgba(16,32,52,0.85);
      color:#d7e5ff;
    }
    .hudStatsToggleIcon {
      font-size:14px;
    }
    .hudAbilityDock {
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      gap:0;
      padding:16px 12px 12px;
      min-height:calc(48px * var(--ability-scale, 1) + 8px);
      flex:0 0 auto;
      pointer-events:auto;
    }
    .hudAbilityStack {
      display:flex;
      gap:6px;
      width:fit-content;
      max-width:100%;
    }
    .hudAbilityStack[data-orientation="horizontal"] {
      flex-direction:column;
      align-items:stretch;
    }
    .hudAbilityStack[data-orientation="horizontal"][data-horizontal-placement="top"] .hudAbilityBarWrap { order:1; }
    .hudAbilityStack[data-orientation="horizontal"][data-horizontal-placement="top"] .hudAbilityVitals { order:0; }
    .hudAbilityStack[data-orientation="horizontal"][data-horizontal-placement="bottom"] .hudAbilityBarWrap { order:0; }
    .hudAbilityStack[data-orientation="horizontal"][data-horizontal-placement="bottom"] .hudAbilityVitals { order:1; }
    .hudAbilityStack[data-orientation="vertical"] {
      position:relative;
      flex-direction:row;
      align-items:flex-start;
      justify-content:center;
      gap:12px;
    }
    .hudAbilityStack[data-orientation="vertical"][data-health-text-placement="top"] {
      padding-top:26px;
    }
    .hudAbilityStack[data-orientation="vertical"][data-health-text-placement="top"] .hudHpText[data-orientation="vertical"] {
      top:2px;
    }
    .hudAbilityStack[data-orientation="vertical"][data-health-text-placement="bottom"] {
      padding-bottom:26px;
    }
    .hudAbilityStack[data-orientation="vertical"][data-health-text-placement="bottom"] .hudHpText[data-orientation="vertical"] {
      top:auto;
      bottom:2px;
    }
    .hudAbilityStack[data-orientation="vertical"][data-vertical-placement="left"] .hudAbilityBarWrap { order:1; }
    .hudAbilityStack[data-orientation="vertical"][data-vertical-placement="left"] .hudAbilityVitals { order:0; }
    .hudAbilityStack[data-orientation="vertical"][data-vertical-placement="right"] .hudAbilityBarWrap { order:0; }
    .hudAbilityStack[data-orientation="vertical"][data-vertical-placement="right"] .hudAbilityVitals { order:1; }
    .hudAbilityBarWrap {
      position:relative;
      display:flex;
      justify-content:center;
      align-items:flex-end;
      width:fit-content;
      padding:0 8px 6px;
      box-sizing:border-box;
      max-width:100%;
      margin:0 auto;
    }
    .hudAbilityBarWrap[data-orientation="vertical"] {
      align-items:center;
      padding:6px 8px;
      margin:0;
    }
    .hudAbilityVitals {
      width:100%;
      max-width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:0;
      box-sizing:border-box;
    }
    .hudAbilityVitals[data-orientation="vertical"] {
      flex-direction:column;
      width:auto;
      max-width:none;
      align-items:center;
      justify-content:center;
      gap:12px;
    }
    .abilityBar {
      display:flex;
      gap:8px;
      padding:0;
      border-radius:12px;
      background:transparent;
      border:0;
      box-shadow:none;
      transition:opacity 0.2s ease, transform 0.2s ease;
      --ability-scale:1;
      margin:0 auto;
    }
    .abilityBar:not(.visible) {
      opacity:0;
      transform:scale(0.95);
      pointer-events:none;
    }
    .abilityBar.visible {
      opacity:1;
      pointer-events:auto;
    }
    .abilityBar[data-orientation="vertical"] {
      flex-direction:column;
      align-items:center;
    }
    .hudAbilityBarWrap[data-orientation="vertical"] {
      align-items:center;
      justify-content:flex-start;
    }
    .timer {
      position:fixed;
      left:0;
      top:0;
      z-index:20;
      background:#0b1220cc;
      border:1px solid #2a3756;
      border-radius:12px;
      padding:8px 12px;
      font-weight:700;
      letter-spacing:0.5px;
      transform-origin: top center;
      transform: translate(var(--ui-pos-x, 0px), var(--ui-pos-y, 0px))
                 translate(var(--ui-anchor-x, 0%), var(--ui-anchor-y, 0%))
                 scale(var(--hud-timer-scale, 1));
    }
    .hudCornerGroup {
      position:fixed;
      left:0;
      top:0;
      z-index:20;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:flex-start;
      pointer-events:none;
      transform-origin: top left;
      transform: translate(var(--ui-pos-x, 0px), var(--ui-pos-y, 0px))
                 translate(var(--ui-anchor-x, 0%), var(--ui-anchor-y, 0%))
                 scale(var(--hud-corner-scale, 1));
    }
    .hudCornerGroup > * {
      pointer-events:auto;
    }
    .hudStatsAnchor {
      position:fixed;
      left:0;
      top:0;
      z-index:20;
      display:flex;
      flex-direction:column;
      gap:8px;
      pointer-events:none;
      transform-origin: bottom center;
      transform: translate(var(--ui-pos-x, 0px), var(--ui-pos-y, 0px))
                 translate(var(--ui-anchor-x, 0%), var(--ui-anchor-y, 0%))
                 scale(var(--hud-stats-scale, 1));
      align-items:center;
    }
    .hudStatsAnchor > * {
      pointer-events:auto;
    }
    .goldCounter { background:#0b1220cc; border:1px solid #2a3756; border-radius:12px; padding:8px 12px; font-weight:700; letter-spacing:0.5px; display:flex; align-items:center; gap:6px; }

.playerFloatHud {
      --player-float-width: 120;
      --player-float-height: 18;
      --player-float-color: #5bc357;
      --hp-notch-spacing: 14px;
      --hp-notch-offset: 0px;
      --hp-notch-width: 1px;
      --hp-notch-margin: 0px;
      --player-attack-width: var(--player-float-width);
      --player-attack-height: 6;
      --player-attack-offset-x: 0;
      --player-attack-offset-y: 0;
      --player-icon-width: 24;
      --player-icon-height: 24;
      --player-icon-offset-x: 12;
      --player-icon-offset-y: 0;
      position:absolute;
      transform:translate(-50%, -100%);
      width:calc(var(--player-float-width) * 1px);
      min-width:calc(var(--player-float-width) * 1px);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
      pointer-events:none;
      opacity:1;
      transition:opacity 0.2s ease;
    }
.playerHpBadge {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:4px;
      font-size:11px;
      font-weight:700;
      color:#f0fbff;
      text-shadow:
        -1px 0 1px rgba(0,0,0,0.8),
        1px 0 1px rgba(0,0,0,0.8),
        0 -1px 1px rgba(0,0,0,0.8),
        0 1px 1px rgba(0,0,0,0.8);
      padding:1px 6px;
      background:rgba(0,0,0,0.45);
      border-radius:999px;
      margin-bottom:2px;
    }
    .playerHpBadge .hpIcon {
      font-size:12px;
      line-height:1;
    }
    .playerHpBadge .hpValue {
      line-height:1;
    }
    .playerModelAnchor {
      position:absolute;
      transform:translate(-50%, -100%);
      pointer-events:none;
      z-index:10;
      display:none;
    }
    .playerModelAnchor[data-active="true"] { display:block; }
    .playerModelCanvas {
      display:block;
      width:180px;
      height:180px;
    }
    .playerFloatTrack {
      position:relative;
      width:100%;
      height:calc(var(--player-float-height, 18) * 1px);
      border-radius:6px;
      background:#04070b;
      border:1px solid #5a616a;
      overflow:hidden;
      box-shadow:
        0 0 0 1px #0a0a0a,
        inset 0 1px 0 rgba(255,255,255,0.08),
        inset 0 -1px 0 rgba(0,0,0,0.65),
        0 4px 10px rgba(0,0,0,0.4);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0 8px;
    }
    .playerFloatFill {
      position:absolute;
      inset:0;
      width:100%;
      background:linear-gradient(
        to bottom,
        var(--player-float-color, #5bc357) 0%,
        var(--player-float-color, #5bc357) 30%,
        var(--player-float-color-dark, #3a8c39) 70%,
        var(--player-float-color-dark, #3a8c39) 100%
      );
      transition:width 0.15s ease;
      z-index:0;
      border-radius:4px;
      border:1px solid #0a0a0a;
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.18),
        inset 0 -1px 0 rgba(0,0,0,0.55),
        0 0 0 1px #0a0a0a;
    }
    .playerFloatFill::before {
      content:"";
      position:absolute;
      inset:1px 1px auto 1px;
      height:50%;
      background:linear-gradient(to bottom, rgba(255,255,255,0.2), rgba(255,255,255,0));
      pointer-events:none;
    }
    .playerFloatFill::after {
      content:"";
      position:absolute;
      left:var(--hp-notch-margin, 0px);
      right:var(--hp-notch-margin, 0px);
      top:2px;
      height:40%;
      background-image: linear-gradient(
        to right,
        rgba(0,0,0,0.32) 0,
        rgba(0,0,0,0.32) var(--hp-notch-width, 1px),
        transparent var(--hp-notch-width, 1px),
        transparent 100%
      );
      background-size: var(--hp-notch-spacing, 14px) 100%;
      background-repeat: repeat-x;
      background-position: var(--hp-notch-offset, 0px) 0;
      pointer-events:none;
    }
    .playerFloatText {
      display:none;
    }

    .playerAttackReadyBar {
      position:relative;
      width:calc(var(--player-attack-width, var(--player-float-width)) * 1px);
      height:calc(var(--player-attack-height, 6) * 1px);
      border-radius:999px;
      background:rgba(12,16,28,0.85);
      border:1px solid rgba(120,105,32,0.65);
      overflow:hidden;
      box-shadow:0 2px 6px rgba(0,0,0,0.45);
      transition:opacity 0.2s ease;
      margin-left:calc(var(--player-attack-offset-x, 0) * 1px);
      margin-top:calc(var(--player-attack-offset-y, 0) * 1px);
    }
    .playerAttackReadyBar.is-disabled {
      opacity:0.35;
    }
    .playerAttackReadyBar.is-ready {
      box-shadow:0 0 10px rgba(255,214,64,0.55);
      border-color:rgba(255,224,96,0.9);
    }
    .playerAttackReadyFill {
      position:absolute;
      inset:0;
      width:0%;
      background:linear-gradient(90deg, #f7d13b, #ffe680);
      transition:width 0.12s ease;
    }
    .playerAttackReadyFill.is-ready {
      box-shadow:0 0 12px rgba(255,228,96,0.65);
    }

    .playerStateIcons {
      position:absolute;
      top:50%;
      left:100%;
      transform:translate(calc(var(--player-icon-offset-x, 12) * 1px), calc(var(--player-icon-offset-y, 0) * 1px - 50%));
      display:flex;
      flex-direction:column;
      gap:6px;
      pointer-events:none;
      min-width:calc(var(--player-icon-width, 24) * 1px + 36px);
    }
    .playerStateIcons[aria-hidden="true"] { display:none; }
    .playerStateIcon {
      display:flex;
      align-items:center;
      gap:8px;
      padding:4px 8px;
      border-radius:10px;
      background:rgba(12,20,34,0.85);
      border:1px solid rgba(40,70,110,0.45);
      box-shadow:0 2px 6px rgba(0,0,0,0.35);
      color:inherit;
      font-weight:600;
      letter-spacing:0.3px;
      text-shadow:0 1px 2px rgba(0,0,0,0.45);
    }
    .playerStateIcon[data-state]{
      color:var(--state-color, #cfe3ff);
    }
    .playerStateEmoji {
      width:calc(var(--player-icon-width, 24) * 1px);
      height:calc(var(--player-icon-height, 24) * 1px);
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:calc(var(--player-icon-height, 24) * 0.7px);
      background:rgba(14,22,36,0.65);
      border:1px solid rgba(52,82,128,0.4);
      box-shadow:0 1px 3px rgba(0,0,0,0.35);
    }
    .playerStateTimer {
      min-width:36px;
    }

    .playerPrayerIcons {
      position:absolute;
      bottom:100%;
      left:50%;
      transform:translate(-50%, -8px);
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:center;
      pointer-events:none;
    }
    .playerPrayerIcons[aria-hidden="true"] { display:none; }
    .playerPrayerIcon {
      min-width:calc(var(--player-icon-width, 24) * 1px);
      min-height:calc(var(--player-icon-height, 24) * 1px);
      padding:4px 8px;
      border-radius:12px;
      background:rgba(12,20,34,0.9);
      border:1px solid rgba(60,88,132,0.6);
      box-shadow:0 2px 6px rgba(0,0,0,0.45);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:calc(var(--player-icon-height, 24) * 0.75px);
      letter-spacing:0.4px;
      text-shadow:0 1px 2px rgba(0,0,0,0.5);
    }

    .monsterHud {
      position:absolute;
      transform:translate(-50%, -50%);
      pointer-events:none;
      min-width:160px;
      max-width:220px;
    }
    .monsterHud[aria-hidden="true"] { display:none; }
    .monsterHud .playerFloatTrack {
      border-color:rgba(255,108,132,0.65);
      box-shadow:0 4px 12px rgba(0,0,0,0.55);
    }
    .monsterHud .playerFloatFill {
      background:linear-gradient(90deg, rgba(255,120,136,0.85), rgba(255,58,102,0.95));
    }
    .monsterHud .playerFloatText {
      color:#ffe4ea;
    }
    .monsterAbilityQueue {
      margin-top:8px;
      display:flex;
      justify-content:center;
      gap:8px;
      pointer-events:none;
    }
    .monsterSlotMachine {
      display:flex;
      align-items:center;
      gap:12px;
      padding:0;
      background:transparent;
      border:none;
      box-shadow:none;
      min-width:0;
    }
    .monsterSlotMachine::before,
    .monsterSlotWindow::after,
    .monsterSlotReel::before,
    .monsterSlotReel::after { display:none; }
    .monsterSlotWindow {
      display:flex;
      align-items:center;
      justify-content:center;
      min-width:40px;
      min-height:40px;
      padding:0 10px;
      border-radius:999px;
      background:rgba(13,20,32,0.55);
      border:1px solid rgba(82,112,158,0.4);
      box-shadow:0 6px 16px rgba(0,0,0,0.45);
      transition:background 0.25s ease, border-color 0.25s ease;
    }
    .monsterSlotReel {
      display:flex;
      align-items:center;
      justify-content:center;
      min-width:0;
      height:40px;
      padding:0 2px;
    }
    .monsterSlotReel[data-focus="true"] {
      filter:drop-shadow(0 0 12px rgba(140,210,255,0.45));
    }
    .monsterSlotSymbol {
      font-size:30px;
      line-height:1;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.45));
      animation:none;
    }
    .monsterSlotReel[data-spinning="true"] .monsterSlotSymbol {
      animation:monsterSlotSpin 0.42s linear infinite;
    }
    @keyframes monsterSlotSpin {
      0% { transform:translateY(-18%); opacity:0.6; }
      50% { transform:translateY(18%); opacity:1; }
      100% { transform:translateY(-18%); opacity:0.6; }
    }
    .monsterSlotReadout {
      font-size:14px;
      font-weight:600;
      letter-spacing:0.35px;
      color:#d8eaff;
      text-shadow:0 1px 2px rgba(0,0,0,0.45);
      min-width:0;
    }
    .monsterSlotMachine[data-state="spinning"] .monsterSlotReadout { color:#8fe9ff; }
    .monsterSlotMachine[data-state="countdown"] .monsterSlotReadout { color:#ffe49c; }
    .monsterSlotMachine[data-state="idle"] .monsterSlotReadout { color:#a6b4cc; }
    .monsterSlotMachine[data-state="spinning"] .monsterSlotWindow { background:rgba(13,26,44,0.7); border-color:rgba(120,186,255,0.35); }
    .monsterSlotMachine[data-state="countdown"] .monsterSlotWindow { background:rgba(42,28,12,0.65); border-color:rgba(255,196,120,0.35); }
    .monsterSlotMachine[data-state="idle"] .monsterSlotWindow { background:rgba(13,20,32,0.4); border-color:rgba(82,112,158,0.28); }

    .abilityBar[data-hotkey-mode="true"] {
      box-shadow:inset 0 0 0 1px rgba(108,146,214,0.45), 0 0 0 2px rgba(108,146,214,0.35);
      background:rgba(12,24,44,0.75);
    }
    .abilitySlot {
      position:relative;
      width:calc(48px * var(--ability-scale));
      height:calc(48px * var(--ability-scale));
      border-radius:12px;
      border:1px solid #3a4a6a;
      background:linear-gradient(160deg, rgba(28,44,70,0.95), rgba(12,24,42,0.95));
      box-shadow:inset 0 0 0 1px rgba(255,255,255,0.06), 0 4px 10px rgba(0,0,0,0.45);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#cfe3ff;
      font-weight:600;
      font-size:calc(16px * var(--ability-scale));
      letter-spacing:0.4px;
      text-shadow:0 0 12px rgba(102,153,255,0.65);
      overflow:hidden;
    }
    .abilitySlot::before {
      content:"";
      position:absolute;
      inset:1px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.04);
      pointer-events:none;
    }
    .abilityKey {
      position:absolute;
      bottom:6px;
      right:8px;
      font-size:calc(11px * var(--ability-scale));
      padding:2px 6px;
      border-radius:8px;
      background:rgba(10,18,32,0.85);
      border:1px solid rgba(68,98,140,0.65);
      color:#9ab9de;
      box-shadow:0 2px 6px rgba(0,0,0,0.4);
    }
    .abilityCooldown {
      position:absolute;
      top:6px;
      right:8px;
      font-size:calc(11px * var(--ability-scale));
      padding:2px 6px;
      border-radius:8px;
      background:rgba(12,20,36,0.85);
      border:1px solid rgba(108,146,214,0.45);
      color:#d7e5ff;
      box-shadow:0 2px 6px rgba(0,0,0,0.4);
    }
    .abilitySlot.selected {
      outline:2px solid rgba(124, 185, 255, 0.8);
      box-shadow:0 0 0 2px rgba(82,127,196,0.6) inset, 0 0 18px rgba(78,134,255,0.35);
    }
    .abilitySlot[data-has-ability="true"]::before {
      border-color:rgba(108,146,214,0.45);
    }
    .abilitySlot.hotkey-mode {
      cursor:crosshair;
      box-shadow:0 0 0 1px rgba(108,146,214,0.35) inset, 0 0 12px rgba(60,102,178,0.45);
    }
    .abilitySlot.hotkey-capturing {
      outline:2px dashed rgba(255, 214, 102, 0.85);
      box-shadow:0 0 0 3px rgba(255, 214, 102, 0.35) inset, 0 0 16px rgba(255, 214, 102, 0.4);
    }
    .abilitySlot[data-cooldown="true"]::after {
      content:"";
      position:absolute;
      inset:0;
      background:rgba(8,14,28,0.6);
      border-radius:12px;
      pointer-events:none;
    }
    .abilityName {
      pointer-events:none;
      font-size:calc(13px * var(--ability-scale));
      font-weight:600;
      letter-spacing:0.3px;
      text-shadow:0 0 12px rgba(92,142,255,0.55);
      text-align:center;
      padding:4px 6px 16px;
      display:block;
      max-width:100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .abilityRepo {
      position:fixed;
      left:calc(var(--menu-width-px, 0px) + (100vw - var(--menu-width-px, 0px)) * 0.5);
      bottom:120px;
      transform:translateX(-50%);
      width:min(420px, calc(100vw - var(--menu-width-px, 0px) - 32px));
      max-height:70vh;
      display:none;
      flex-direction:column;
      gap:14px;
      padding:16px 18px;
      background:#0b1224;
      border:1px solid #2a3756;
      border-radius:18px;
      box-shadow:0 18px 48px rgba(4,12,24,0.55);
      z-index:60;
    }
    .abilityRepo.open { display:flex; }
    .abilityRepoHeader {
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .abilityRepoTitle {
      font-size:16px;
      font-weight:700;
      color:#d7e5ff;
      letter-spacing:0.3px;
    }
    .abilityRepoSubtitle {
      font-size:12px;
      color:#9aaacc;
      margin-top:2px;
    }
    .abilityRepoClose {
      border:0;
      background:#16233c;
      color:#cfe3ff;
      width:32px;
      height:32px;
      border-radius:10px;
      cursor:pointer;
      font-size:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 6px 16px rgba(4,12,24,0.45);
    }
    .abilityRepoBody {
      display:grid;
      gap:14px;
    }
    @media (min-width: 540px) {
      .abilityRepoBody { grid-template-columns:1fr 1fr; }
    }
    .spellList {
      display:flex;
      flex-direction:column;
      gap:10px;
      overflow-y:auto;
      max-height:40vh;
      padding-right:2px;
    }
    .spellCard {
      position:relative;
      border:1px solid rgba(46,64,102,0.8);
      background:linear-gradient(155deg, rgba(20,34,58,0.9), rgba(12,24,44,0.9));
      border-radius:14px;
      padding:12px 14px;
      text-align:left;
      color:#dee9ff;
      cursor:pointer;
      display:grid;
      gap:6px;
      transition:transform 0.12s ease, border-color 0.12s ease, box-shadow 0.12s ease;
    }
    .spellCard:hover,
    .spellCard:focus-visible {
      transform:translateY(-1px);
      border-color:#4f6fc0;
      box-shadow:0 12px 30px rgba(10,20,40,0.45);
    }
    .spellCard.selected {
      border-color:#6f8fff;
      box-shadow:0 0 0 1px rgba(111,143,255,0.55);
    }
    .spellCard.editing {
      border-color:#55ccff;
      box-shadow:0 0 0 1px rgba(85,204,255,0.4), 0 10px 30px rgba(30,80,110,0.35);
    }
    .spellCard.equipped::after {
      content:'Assigned';
      position:absolute;
      top:10px;
      right:12px;
      font-size:11px;
      letter-spacing:0.5px;
      padding:2px 6px;
      border-radius:999px;
      background:rgba(34,132,255,0.25);
      border:1px solid rgba(80,150,255,0.6);
      color:#a9c8ff;
    }
    .spellName { font-weight:600; letter-spacing:0.3px; }
    .spellDesc { font-size:12px; color:#9ab6d8; }
    .spellSummary { font-size:12px; color:#b6c9f0; }
    .spellEmpty { font-size:13px; color:#9ab; text-align:center; padding:16px 0; }
    .spellEditor {
      border:1px solid rgba(46,64,102,0.75);
      background:rgba(14,24,44,0.85);
      border-radius:14px;
      padding:12px 14px;
      min-height:140px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .spellEditorPlaceholder {
      font-size:12px;
      color:#8da2c4;
      line-height:1.4;
    }
    .spellEditorForm { display:flex; flex-direction:column; gap:10px; }
    .editorTitle { font-weight:600; letter-spacing:0.3px; color:#d7e5ff; }
    .editorSubtitle { font-size:12px; color:#9ab; }
    .editorRow { display:flex; flex-direction:column; gap:6px; }
    .editorRow label { display:flex; justify-content:space-between; font-size:12px; color:#9ab; }
    .editorRow label .editorRange { color:#7ea0d0; font-size:11px; }
    .editorRow input {
      width:100%;
      padding:6px 8px;
      border-radius:8px;
      border:1px solid #2a3756;
      background:#111c33;
      color:#e6edf3;
    }
    .editorRow input:focus-visible {
      outline:2px solid rgba(102,153,255,0.45);
      border-color:rgba(102,153,255,0.65);
    }

    /* Score overlay (TOP CENTER) */
    .scoreOverlay {
      position:fixed;
      left:0;
      top:0;
      transform: translate(var(--ui-pos-x, 0px), var(--ui-pos-y, 0px))
                 translate(var(--ui-anchor-x, 0%), var(--ui-anchor-y, 0%))
                 scale(var(--hud-score-scale, 1));
      transform-origin: top center;
      z-index:21;
      display:flex;
      align-items:center;
      gap:12px;
      padding:8px 12px;
      background:#0b1220cc;
      border:1px solid #2a3756;
      border-radius:12px;
      font-weight:800;
      letter-spacing:.3px;
    }
    .scoreTeam { display:flex; align-items:center; gap:8px; }
    .pill {
      width:14px; height:14px; border-radius:50%;
      outline:2px solid #05121a;
    }
    .pill.blue { background:#2aa9ff; }
    .pill.red  { background:#ff5577; }
    .scoreVal { min-width:24px; text-align:center; }

    /* Winner banner */
    .winBanner {
      position:absolute; inset:auto 0 24px 0; margin:auto; width:fit-content;
      left: 50%; transform: translateX(-50%);
      background:#072; color:#eafff1; border:1px solid #3ba36a; border-radius:12px;
      padding:10px 14px; font-weight:800; letter-spacing:.3px; display:none;
    }
    .winBanner.show { display:block; }

    /* Compact when collapsed */
    .app[data-collapsed="true"] .btn { justify-content:center; }
    .app[data-collapsed="true"] .btn .hint { display:none; }
    .app[data-collapsed="true"] .btn::after { content: attr(data-icon); }

    .sb-fab {
      position:fixed;
      top:50%;
      left:0;
      transform:translateY(-50%);
      width:48px;
      height:92px;
      display:none;
      align-items:center;
      justify-content:center;
      border:0;
      border-radius:0 999px 999px 0;
      background:#16233c;
      color:#cfe3ff;
      cursor:pointer;
      box-shadow:0 16px 36px rgba(4,12,24,0.45);
      z-index:90;
      padding:0;
      transition:background 0.2s ease, color 0.2s ease;
    }
    .sb-fab:hover { background:#1d2f4f; color:#e1ecff; }
    .sb-fab:focus-visible {
      outline:2px solid #4da1ff;
      outline-offset:4px;
    }
    .sb-fab-icon {
      width:0;
      height:0;
      border-top:14px solid transparent;
      border-bottom:14px solid transparent;
      border-left:20px solid currentColor;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.35));
    }
    .app[data-hidden="true"] .sb-fab { display:flex; }

    .offsetGroup {
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .offsetGroup label {
      display:flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      color:#9ab;
    }
    .offsetGroup label span {
      display:inline-flex;
      width:14px;
      justify-content:center;
      font-weight:600;
      color:#b5c8e8;
    }

    .settingsSearchOverlay {
      position:fixed;
      inset:0;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:72px 16px 24px;
      background:rgba(7, 12, 22, 0.78);
      backdrop-filter:blur(12px);
      z-index:220;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.18s ease;
    }
    .settingsSearchOverlay[data-open="true"] {
      opacity:1;
      pointer-events:auto;
    }
    .settingsSearchDialog {
      width:min(760px, 100%);
      background:#0b1526;
      border:1px solid #1e2b45;
      border-radius:16px;
      box-shadow:0 34px 90px rgba(3, 8, 16, 0.55);
      display:flex;
      flex-direction:column;
      gap:0;
      position:relative;
    }
    .settingsSearchHeader {
      display:flex;
      align-items:center;
      gap:10px;
      padding:14px 18px 12px;
      border-bottom:1px solid #192947;
    }
    .settingsSearchInputWrap { flex:1; }
    .settingsSearchInputLabel {
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }
    .settingsSearchInput {
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid #243553;
      background:#0f1f35;
      color:#f1f6ff;
      font-size:15px;
      line-height:1.2;
      transition:border 0.15s ease, box-shadow 0.15s ease;
    }
    .settingsSearchInput::placeholder { color:#5e7ca8; }
    .settingsSearchInput:focus {
      outline:none;
      border-color:#3b6ddc;
      box-shadow:0 0 0 2px rgba(59, 109, 220, 0.28);
    }
    .settingsSearchHelpButton {
      width:36px;
      height:36px;
      border-radius:10px;
      border:1px solid #243553;
      background:#0f1f35;
      color:#cfe3ff;
      font-weight:600;
      font-size:18px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:background 0.15s ease, border 0.15s ease;
    }
    .settingsSearchHelpButton:hover,
    .settingsSearchHelpButton:focus-visible {
      border-color:#3b6ddc;
      background:#142744;
      outline:none;
    }
    .settingsSearchBody {
      position:relative;
      display:flex;
      flex-direction:column;
      gap:0;
      max-height:min(60vh, 520px);
      overflow:hidden;
    }
    .settingsSearchFacets {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      padding:10px 18px 0;
      border-bottom:1px solid #15233c;
    }
    .settingsSearchFacet {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      background:#15233c;
      color:#a6c5ff;
      font-size:12px;
      cursor:pointer;
      border:1px solid transparent;
      transition:border 0.15s ease, background 0.15s ease;
    }
    .settingsSearchFacet:hover,
    .settingsSearchFacet:focus-visible {
      border-color:#3b6ddc;
      background:#1d3050;
      outline:none;
    }
    .settingsSearchResults {
      position:relative;
      flex:1;
      overflow-y:auto;
      padding:8px 6px 8px 18px;
      display:grid;
      gap:4px;
    }
    .settingsSearchResult {
      display:grid;
      grid-template-columns:1fr auto;
      align-items:center;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid transparent;
      background:#101f34;
      gap:14px;
      transition:border 0.15s ease, background 0.15s ease;
      cursor:pointer;
    }
    .settingsSearchResult:hover,
    .settingsSearchResult[aria-selected="true"] {
      border-color:#3b6ddc;
      background:#172b49;
    }
    .settingsSearchResultMain { display:grid; gap:4px; }
    .settingsSearchResultTitle {
      font-weight:600;
      color:#f1f6ff;
      font-size:14px;
    }
    .settingsSearchResultPath {
      font-size:12px;
      color:#7fa4d4;
    }
    .settingsSearchResultDesc {
      font-size:12px;
      color:#9ab6d9;
    }
    .settingsSearchResultAction { display:flex; align-items:center; gap:8px; }
    .settingsSearchResultSlider {
      width:140px;
    }
    .settingsSearchResultNumber {
      width:72px;
      padding:4px 6px;
      border-radius:8px;
      border:1px solid #2a3c5e;
      background:#0f1f35;
      color:#f1f6ff;
      font-size:12px;
    }
    .settingsSearchResultValue {
      font-size:12px;
      color:#cfe3ff;
      font-weight:600;
      min-width:48px;
    }
    .settingsSearchResultToggle {
      padding:6px 12px;
      border-radius:999px;
      border:1px solid #2a3c5e;
      background:#13263f;
      color:#cfe3ff;
      font-size:12px;
      cursor:pointer;
      transition:background 0.15s ease, border 0.15s ease;
    }
    .settingsSearchResultToggle:hover,
    .settingsSearchResultToggle:focus-visible {
      border-color:#3b6ddc;
      background:#1a3353;
      outline:none;
    }
    .settingsSearchEmpty {
      padding:36px 24px;
      text-align:center;
      display:grid;
      gap:10px;
    }
    .settingsSearchEmptyPrimary { font-size:15px; font-weight:600; color:#f0f6ff; }
    .settingsSearchEmptySecondary { font-size:13px; color:#9ab6d9; }
    .settingsSearchAskBtn {
      justify-self:center;
      padding:8px 16px;
      border-radius:999px;
      border:1px solid #3b6ddc;
      background:#172b49;
      color:#cfe3ff;
      font-size:13px;
      cursor:pointer;
      transition:background 0.15s ease;
    }
    .settingsSearchAskBtn:hover,
    .settingsSearchAskBtn:focus-visible {
      background:#1f3560;
      outline:none;
    }
    .settingsSearchFooter {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding:10px 18px 14px;
      border-top:1px solid #192947;
      font-size:12px;
      color:#6f8fbf;
    }
    .settingsSearchRecents { display:flex; flex-wrap:wrap; gap:6px; }
    .settingsSearchRecentQuery {
      padding:3px 8px;
      border-radius:999px;
      background:#15233c;
      color:#9ab6d9;
      cursor:pointer;
      border:1px solid transparent;
      transition:border 0.15s ease, background 0.15s ease;
    }
    .settingsSearchRecentQuery:hover,
    .settingsSearchRecentQuery:focus-visible {
      border-color:#3b6ddc;
      background:#1d3050;
      outline:none;
    }
    .settingsSearchHelp {
      position:absolute;
      top:48px;
      right:32px;
      width:300px;
      background:#101f34;
      border:1px solid #1e2b45;
      border-radius:12px;
      box-shadow:0 24px 64px rgba(3, 8, 16, 0.45);
      display:flex;
      flex-direction:column;
      gap:0;
      padding:14px 16px;
    }
    .settingsSearchHelp[hidden] { display:none; }
    .settingsSearchHelpHeader {
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:10px;
      color:#f0f6ff;
      font-weight:600;
    }
    .settingsSearchHelpClose {
      background:none;
      border:0;
      color:#9ab6d9;
      font-size:18px;
      cursor:pointer;
    }
    .settingsSearchHelpClose:hover,
    .settingsSearchHelpClose:focus-visible {
      color:#cfe3ff;
      outline:none;
    }
    .settingsSearchHelpBody {
      font-size:12px;
      color:#9ab6d9;
      display:grid;
      gap:8px;
    }
    .settingsSearchHelpBody code {
      font-family:monospace;
      background:#172b49;
      padding:2px 4px;
      border-radius:6px;
      color:#cfe3ff;
    }
    .settingsSearchHighlight {
      color:#ffe785;
      font-weight:600;
    }
  </style>
</head>
<body>
  <div class="app" id="app" data-collapsed="false" data-hidden="false">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sb-header">
        <button id="sbHide" class="sb-toggle sb-hide" title="Hide menu" aria-label="Hide menu">
          <span class="sb-hide-icon" aria-hidden="true"></span>
        </button>
        <div class="sb-title">MakaMoba</div>
      </div>
      <div class="sb-content">
        <div class="sb-genre">
          <label for="settingsGenre">Settings Category</label>
          <select id="settingsGenre">
            <option value="core">Core Systems</option>
            <option value="moba">MOBA Systems</option>
          </select>
        </div>
        <button class="btn" data-settings-genre="core" id="btnPlay" data-icon="â–¶" title="Start/Stop">
          â–¶ Start <span class="hint">Begin waves</span>
        </button>

        <button class="btn" data-settings-genre="core" id="btnMap" data-icon="ðŸ—º" title="Upload map">
          Map <span class="hint">Upload imageâ€¦</span>
        </button>
        <input id="file" type="file" accept="image/*" style="display:none" />
        <div class="fileNameWrap" id="fileNameWrap">
          <span class="dot"></span>
          <div id="fileName" class="hint">No map loaded</div>
        </div>

        <button class="btn" data-settings-genre="core" id="btnHitbox" data-icon="ðŸ§¡" title="Upload hitbox map">
          Hitbox Map <span class="hint">Upload collisionâ€¦</span>
        </button>
        <input id="fileHitbox" type="file" accept="image/*" style="display:none" />
        <div class="fileNameWrap" id="hitboxNameWrap">
          <span class="dot"></span>
          <div id="hitboxName" class="hint">No hitbox map loaded</div>
        </div>

        <button class="btn" data-settings-genre="core" id="btnGameState" data-icon="ðŸ’¾" title="Import/export all settings">
          Game Setup <span class="hint">Full import/exportâ€¦</span>
        </button>
        <div class="submenu" id="gameStatePane">
          <div class="formrow"><label>Entire project</label><div class="rangeWrap"><button class="formButton" id="gameStateImport" type="button">Import setup</button><button class="formButton" id="gameStateExport" type="button">Export setup</button></div></div>
          <div class="subhint">Saves every setting, including the map, lanes, minions, player, HUD, and vision tuning.</div>
          <input id="gameStateImportFile" type="file" accept="application/json,.json" style="display:none" />
        </div>

        <button class="btn" data-settings-genre="core" id="btnColliders" data-icon="ðŸš§" title="Collision editor">
          Collision <span class="hint">Place blockersâ€¦</span>
        </button>
        <div class="submenu" id="colliderPane">
          <button class="subbtn" id="colliderEditToggle" type="button">Enter collision edit mode</button>
          <div class="formrow"><label for="colliderShape">Shape</label><select id="colliderShape"><option value="circle">Circle</option><option value="capsule">Pill</option><option value="crescent">Crescent</option></select></div>
          <div class="formrow rangeRow"><label for="colliderRadius">Size</label><div class="rangeWrap"><input type="number" id="colliderRadius" min="0" max="10000" value="80"><span class="rangeValue" id="colliderRadiusDisplay">80px</span></div></div>
          <div class="formrow rangeRow" id="colliderInnerRadiusRow"><label for="colliderInnerRadius">Inner curve</label><div class="rangeWrap"><input type="number" id="colliderInnerRadius" min="0" max="10000" value="40"><span class="rangeValue" id="colliderInnerRadiusDisplay">40px</span></div></div>
          <div class="formrow rangeRow" id="colliderOffsetRow"><label for="colliderOffset">Arc offset</label><div class="rangeWrap"><input type="number" id="colliderOffset" min="0" max="10000" value="110"><span class="rangeValue" id="colliderOffsetDisplay">110px</span></div></div>
          <div class="formrow rangeRow" id="colliderLengthRow"><label for="colliderLength">Length</label><div class="rangeWrap"><input type="number" id="colliderLength" min="0" max="10000" value="200"><span class="rangeValue" id="colliderLengthDisplay">200px</span></div></div>
          <div class="formrow rangeRow" id="colliderRotationRow"><label for="colliderRotation">Rotation</label><div class="rangeWrap"><input type="number" id="colliderRotation" min="0" max="360" value="0"><span class="rangeValue" id="colliderRotationDisplay">0Â°</span></div></div>
          <div class="formrow"><label>Placement</label><div class="rangeWrap"><button class="formButton" id="colliderPlace" type="button">Place new shape</button><button class="formButton" id="colliderToggleVisibility" type="button">Hide shapes</button></div></div>
          <div class="formrow"><label>Selection</label><div class="rangeWrap"><button class="formButton" id="colliderDelete" type="button" disabled>Delete selected</button></div></div>
          <div class="formrow"><label>Data</label><div class="rangeWrap"><button class="formButton" id="colliderLoad" type="button">Load map</button><button class="formButton" id="colliderSave" type="button">Save map</button></div></div>
          <input id="colliderImport" type="file" accept="application/json,.json" style="display:none" />
          <div class="subhint">Collision shapes</div>
          <div class="colliderList" id="colliderList" role="listbox" aria-label="Collision shapes"></div>
        </div>

        <button class="btn" data-settings-genre="core" id="btnVision" data-icon="ðŸ‘€" title="Vision editor">
          Vision <span class="hint">Fog of warâ€¦</span>
        </button>
        <div class="submenu" id="visionPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="visionConfigLoad" type="button">Load setup</button><button class="formButton" id="visionConfigSave" type="button">Save setup</button></div></div>
          <input id="visionConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="subhint">Configure fog of war vision sources.</div>
          <button class="subbtn" id="visionEditToggle" type="button">Enter vision edit mode</button>
          <div class="formrow"><label for="visionFullReveal">Full vision</label><div class="rangeWrap"><input type="checkbox" id="visionFullReveal" checked aria-label="Reveal full map vision" /><span class="rangeValue">Reveal entire map</span></div></div>
          <div class="formrow rangeRow"><label for="GameState.player.vision.radius">Player vision</label><div class="rangeWrap"><input type="number" id="GameState.player.vision.radius" min="0" max="10000" value="900"><span class="rangeValue" id="playerVisionRadiusDisplay">900px</span></div></div>
          <div class="subhint">Vision shapes</div>
          <div class="formrow"><label for="visionShape">Shape</label><select id="visionShape"><option value="circle">Circle</option><option value="capsule">Pill</option><option value="crescent">Crescent</option></select></div>
          <div class="formrow"><label for="visionMode">Type</label><select id="visionMode"><option value="vision">Vision</option><option value="hiding">Hiding</option></select></div>
          <div class="formrow rangeRow"><label for="visionRadius">Size</label><div class="rangeWrap"><input type="number" id="visionRadius" min="0" max="10000" value="240"><span class="rangeValue" id="visionRadiusDisplay">240px</span></div></div>
          <div class="formrow rangeRow" id="visionInnerRadiusRow"><label for="visionInnerRadius">Inner curve</label><div class="rangeWrap"><input type="number" id="visionInnerRadius" min="0" max="10000" value="120"><span class="rangeValue" id="visionInnerRadiusDisplay">120px</span></div></div>
          <div class="formrow rangeRow" id="visionOffsetRow"><label for="visionOffset">Arc offset</label><div class="rangeWrap"><input type="number" id="visionOffset" min="0" max="10000" value="240"><span class="rangeValue" id="visionOffsetDisplay">240px</span></div></div>
          <div class="formrow rangeRow" id="visionLengthRow"><label for="visionLength">Length</label><div class="rangeWrap"><input type="number" id="visionLength" min="0" max="10000" value="400"><span class="rangeValue" id="visionLengthDisplay">400px</span></div></div>
          <div class="formrow rangeRow" id="visionRotationRow"><label for="visionRotation">Rotation</label><div class="rangeWrap"><input type="number" id="visionRotation" min="0" max="360" value="0"><span class="rangeValue" id="visionRotationDisplay">0Â°</span></div></div>
          <div class="formrow"><label>Placement</label><div class="rangeWrap"><button class="formButton" id="visionPlace" type="button">Place new vision</button><button class="formButton" id="visionToggleVisibility" type="button">Hide vision</button></div></div>
          <div class="formrow"><label>Selection</label><div class="rangeWrap"><button class="formButton" id="visionDelete" type="button" disabled>Delete selected</button></div></div>
          <div class="colliderList" id="visionList" role="listbox" aria-label="Vision shapes"></div>
        </div>



        <button class="btn" data-settings-genre="core" id="btnPerf" data-icon="dY4" title="Performance metrics">
          Performance <span class="hint">FPS & load</span>
        </button>
        <div class="submenu" id="perfPane">
          <div class="subhint">Live snapshot of simulation and rendering load.</div>
          <div class="formrow"><label>FPS</label><div class="rangeWrap"><span class="rangeValue" id="perfFpsValue">--</span></div></div>
          <div class="formrow"><label>Frame time</label><div class="rangeWrap"><span class="rangeValue" id="perfFrameValue">-- ms</span></div></div>
          <div class="formrow"><label>Minions</label><div class="rangeWrap"><span class="rangeValue" id="perfMinionsValue">--</span></div></div>
          <div class="formrow"><label>Projectiles</label><div class="rangeWrap"><span class="rangeValue" id="perfProjectilesValue">--</span></div></div>
          <div class="formrow"><label>Colliders</label><div class="rangeWrap"><span class="rangeValue" id="perfCollidersValue">--</span></div></div>
          <div class="formrow"><label>Vision sources</label><div class="rangeWrap"><span class="rangeValue" id="perfVisionValue">--</span></div></div>
          <div class="formrow"><label>Last spike</label><div class="rangeWrap"><span class="rangeValue" id="perfSpikeValue">--</span></div></div>
          <div class="formrow"><label>Collision load</label><div class="rangeWrap"><span class="rangeValue" id="perfCollLoadValue">--</span></div></div>
          <div class="formrow"><label>Pathfinding load</label><div class="rangeWrap"><span class="rangeValue" id="perfPathLoadValue">--</span></div></div>
          <div class="formrow"><label>Density</label><div class="rangeWrap"><span class="rangeValue" id="perfDensityValue">--</span></div></div>
          <div class="formrow"><label>Share</label><div class="rangeWrap"><button class="formButton" id="perfCopyLog" type="button">Copy log</button></div></div>
          <div class="formrow"><label></label><div class="rangeWrap"><button class="formButton" id="perfDownloadLog" type="button">Download log</button></div></div>
          <div class="formrow"><label></label><div class="rangeWrap"><button class="formButton" id="perfStressTest" type="button">Run stress test</button></div></div>
        </div>

        <!-- Game Mode / Scoring -->
        <button class="btn" data-settings-genre="moba" id="btnScoring" data-icon="A~J" title="Game mode">
          Game mode <span class="hint">Scoring &amp; teams</span>
        </button>
        <div class="submenu" id="scoringPane">
          <div class="formrow"><label>Mode</label>
            <div class="rangeWrap">
              <select id="scoreMode">
                <option value="standard">Standard (portals)</option>
                <option value="lastNexus">Last nexus standing</option>
              </select>
            </div>
          </div>
          <div class="formrow"><label>Enable multi-team (experimental)</label>
            <div class="rangeWrap">
              <input type="checkbox" id="multiTeamEnabled">
            </div>
          </div>
          <div class="formrow"><label for="multiTeamCount">Team count (even, max 10)</label>
            <div class="rangeWrap">
              <input type="number" id="multiTeamCount" min="2" max="10" step="2" value="10">
            </div>
          </div>
          <div class="formrow"><label>Team colors</label>
            <div class="rangeWrap" id="multiTeamColors"></div>
          </div>
          <div class="subhint">Multi-team is experimental; enables radial lanes, per-team nexus, and last-nexus scoring.</div>
        </div>

        <!-- Minions -->
        <button class="btn" data-settings-genre="moba" id="btnMinions" data-icon="ðŸ‘¾" title="Minions">
          Minions <span class="hint">Create spawnsâ€¦</span>
        </button>
        <div class="submenu" id="minionsPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="minionConfigLoad" type="button">Load setup</button><button class="formButton" id="minionConfigSave" type="button">Save setup</button></div></div>
          <input id="minionConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <button class="subbtn" id="btnSpawnBlue">Create Blue-side spawn</button>
          <button class="subbtn" id="btnSpawnRed">Create Red-side spawn</button>
          <div class="subhint">Place one <b>Blue spawn</b> and one <b>Red spawn</b>. Each side marches toward the opposing spawn.</div>

          <div class="formrow"><label for="GameState.lanes.count">Number of lanes</label><input type="number" id="GameState.lanes.count" min="1" value="1"></div>
          <div class="subhint">Minions per lane = total minions ÷ lanes. Adjust diagonal offsets to bend each path.</div>
          <div class="laneOffsetList" id="laneOffsets"></div>

          <div class="formrow"><label for="waveState.waveCount">Minions per wave (0â€“1000)</label><input type="number" id="waveState.waveCount" min="0" max="1000" value="7"></div>
          <div class="formrow"><label for="waveInterval">Respawn every (sec, 5â€“60)</label><input type="number" id="waveInterval" min="5" max="60" value="30"></div>
          <div class="formrow"><label for="spawnSpacing">Delay between spawns (sec, 0.00â€“1.00)</label><input type="number" id="spawnSpacing" min="0" max="1" step="0.01" value="0.25"></div>

          <!-- Custom stats + per-wave scaling -->
          <div class="formrow"><label for="minionSize">Minion size (px, 0â€“1000)</label><input type="number" id="minionSize" min="0" max="1000" value="15"></div>
          <div class="formrow"><label for="minionHP">Minion health (1â€“1000)</label><input type="number" id="minionHP" min="1" max="1000" value="1000"></div>
          <div class="formrow"><label for="minionDMG">Minion damage (1â€“100)</label><input type="number" id="minionDMG" min="1" max="100" value="40"></div>
          <div class="formrow"><label for="portalState.scalePct">Scaling per wave % (0â€“50)</label><input type="number" id="portalState.scalePct" min="0" max="50" value="10"></div>
          <div class="subhint">Scaling is linear: stats this wave = base Ã— (1 + % Ã— (waveâˆ’1)).</div>
        </div>

        <!-- Turrets -->
        <button class="btn" data-settings-genre="moba" id="btnTurrets" data-icon="🗼" title="Turret settings">
          Turrets <span class="hint">Lane defenses</span>
        </button>
        <div class="submenu" id="turretPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="turretConfigLoad" type="button">Load setup</button><button class="formButton" id="turretConfigSave" type="button">Save setup</button></div></div>
          <input id="turretConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="turretCount">Turrets per lane</label><input type="number" id="turretCount" min="0" max="6" value="1"></div>
          <div class="formrow"><label for="turretRange">Range (px)</label><input type="number" id="turretRange" min="100" max="4000" value="650"></div>
          <div class="formrow"><label for="turretDamage">Damage</label><input type="number" id="turretDamage" min="1" max="10000" value="150"></div>
          <div class="formrow"><label for="turretInterval">Fire cadence (sec)</label><input type="number" id="turretInterval" step="0.05" min="0.25" max="10" value="1.25"></div>
          <div class="formrow"><label for="turretFocus">Dive punish window (sec)</label><input type="number" id="turretFocus" step="0.1" min="0" max="5" value="2"></div>
          <div class="subhint">Offsets apply to each mirrored turret pair.</div>
          <div class="formrow"><label>Offsets</label><div class="rangeWrap"><button class="formButton" id="turretResetOffsets" type="button">Reset to lane</button></div></div>
          <div class="turretOffsetList" id="turretOffsets"></div>
        </div>

        <!-- Player -->
        <button class="btn" data-settings-genre="core" id="btnPlayer" data-icon="ðŸ§" title="Player settings">
          Player <span class="hint">Hero tuningâ€¦</span>
        </button>
        <div class="submenu" id="playerPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="playerConfigLoad" type="button">Load setup</button><button class="formButton" id="playerConfigSave" type="button">Save setup</button></div></div>
          <input id="playerConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="playerSpeed">Movement speed (px/s, 1â€“1000)</label><input type="number" id="playerSpeed" min="1" max="1000" value="1000"></div>
          <div class="formrow"><label for="playerSize">Player size (px, 0â€“1000)</label><input type="number" id="playerSize" min="0" max="1000" value="10"></div>
          <div class="formrow"><label for="playerTeam">Team</label><select id="playerTeam"><option value="blue">Blue</option><option value="red">Red</option></select></div>
          <div class="formrow"><label for="playerHitboxToggle">Player hitbox</label><button class="formButton" id="playerHitboxToggle" type="button">Hide hitbox</button></div>
          <div class="formrow"><label for="playerHitboxShape">Hitbox shape</label><select id="playerHitboxShape"><option value="capsule">Capsule</option><option value="circle">Circle</option><option value="rectangle">Rectangle</option></select></div>
          <div class="formrow rangeRow"><label for="playerHitboxLength">Hitbox length</label><div class="rangeWrap"><input type="number" id="playerHitboxLength" min="0" max="10000" value="32"><span class="rangeValue" id="playerHitboxLengthDisplay">32px</span></div></div>
          <div class="formrow rangeRow"><label for="playerHitboxWidth">Hitbox width</label><div class="rangeWrap"><input type="number" id="playerHitboxWidth" min="0" max="10000" value="20"><span class="rangeValue" id="playerHitboxWidthDisplay">20px</span></div></div>
          <div class="subhint">Ability hurtbox (used for spells and targeting)</div>
          <div class="formrow"><label for="playerHurtboxToggle">Hurtbox overlay</label><button class="formButton" id="playerHurtboxToggle" type="button">Hide hurtbox</button></div>
          <div class="formrow"><label for="playerHurtboxShape">Hurtbox shape</label><select id="playerHurtboxShape"><option value="capsule">Capsule</option><option value="circle">Circle</option><option value="rectangle">Rectangle</option></select></div>
          <div class="formrow rangeRow"><label for="playerHurtboxLength">Hurtbox length</label><div class="rangeWrap"><input type="number" id="playerHurtboxLength" min="0" max="10000" value="32"><span class="rangeValue" id="playerHurtboxLengthDisplay">32px</span></div></div>
          <div class="formrow rangeRow"><label for="playerHurtboxWidth">Hurtbox width</label><div class="rangeWrap"><input type="number" id="playerHurtboxWidth" min="0" max="10000" value="20"><span class="rangeValue" id="playerHurtboxWidthDisplay">20px</span></div></div>
          <div class="subhint">Adjust the overlay shape to match your model. Click indicator settings below.</div>
          <div class="subhint">Spell origin</div>
          <div class="formrow rangeRow"><label for="playerSpellOriginLength">Origin length offset</label><div class="rangeWrap"><input type="number" id="playerSpellOriginLength" min="0" max="10000" value="1000"><span class="rangeValue" id="playerSpellOriginLengthDisplay">0px</span></div></div>
          <div class="formrow rangeRow"><label for="playerSpellOriginWidth">Origin width offset</label><div class="rangeWrap"><input type="number" id="playerSpellOriginWidth" min="0" max="10000" value="1000"><span class="rangeValue" id="playerSpellOriginWidthDisplay">0px</span></div></div>
          <div class="formrow"><label for="playerMoveCircleStart">Move circle start radius (px, 0â€“1000)</label><input type="number" id="playerMoveCircleStart" min="0" max="1000" value="12"></div>
          <div class="formrow"><label for="playerMoveCircleEnd">Move circle end radius (px, 0â€“1000)</label><input type="number" id="playerMoveCircleEnd" min="0" max="1000" value="52"></div>
          <div class="formrow"><label for="playerMoveCircleColor">Move circle color</label><input type="color" id="playerMoveCircleColor" value="#7fe3ff"></div>
          <div class="subhint">Auto attack</div>
          <div class="formrow"><label for="playerAttackRange">Attack range (px, 0â€“1000)</label><input type="number" id="playerAttackRange" min="0" max="1000" value="200"></div>
          <div class="formrow rangeRow"><label for="playerAttackRangeOpacity">Range overlay opacity</label><div class="rangeWrap"><input type="number" id="playerAttackRangeOpacity" min="0" max="10000" value="14"><span class="rangeValue" id="playerAttackRangeOpacityDisplay">14%</span></div></div>
          <div class="formrow"><label for="playerAttackSpeed">Attack speed (ms, 0â€“5000)</label><input type="number" id="playerAttackSpeed" min="0" max="5000" value="1000"></div>
          <div class="formrow"><label for="playerAttackWindup">Attack windup (ms, 0â€“5000)</label><input type="number" id="playerAttackWindup" min="0" max="5000" value="250"></div>
          <div class="formrow"><label for="playerAttackDamage">Attack damage (0â€“1000)</label><input type="number" id="playerAttackDamage" min="0" max="1000" value="10"></div>
          <div class="formrow"><label for="playerHitSplatSize">Damage number size (px, 0â€“100)</label><input type="number" id="playerHitSplatSize" min="0" max="100" value="28"></div>
        </div>

        <!-- Health Bar -->
        <button class="btn" data-settings-genre="core" id="btnHealth" data-icon="❤️" title="Health bar settings">
          Health Bar <span class="hint">Vitals & statuses...</span>
        </button>
        <div class="submenu" id="healthPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="healthConfigLoad" type="button">Load setup</button><button class="formButton" id="healthConfigSave" type="button">Save setup</button></div></div>
          <input id="healthConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="playerHP">Player health (0-10000)</label><input type="number" id="playerHP" min="0" max="10000" value="1000"></div>
          <div class="formrow rangeRow"><label for="playerFloatSize">Health bar width</label><div class="rangeWrap"><input type="number" id="playerFloatSize" min="0" max="10000" value="120"><span class="rangeValue" id="playerFloatSizeDisplay">120px</span></div></div>
          <div class="formrow rangeRow"><label for="playerFloatHeight">Health bar height</label><div class="rangeWrap"><input type="number" id="playerFloatHeight" min="0" max="500" value="18"><span class="rangeValue" id="playerFloatHeightDisplay">18px</span></div></div>
          <div class="formrow rangeRow"><label for="playerFloatOffset">Health bar overhead space</label><div class="rangeWrap"><input type="number" id="playerFloatOffset" min="0" max="10000" value="18"><span class="rangeValue" id="playerFloatOffsetDisplay">18px</span></div></div>
          <div class="formrow"><label for="playerHealthColor">Health color</label><input type="color" id="playerHealthColor" value="#5bc357"></div>
          <div class="subhint">Auto attack readiness bar</div>
          <div class="formrow rangeRow"><label for="playerAttackBarWidth">Bar width</label><div class="rangeWrap"><input type="number" id="playerAttackBarWidth" min="0" max="10000" value="120"><span class="rangeValue" id="playerAttackBarWidthDisplay">120px</span></div></div>
          <div class="formrow rangeRow"><label for="playerAttackBarHeight">Bar height</label><div class="rangeWrap"><input type="number" id="playerAttackBarHeight" min="0" max="500" value="6"><span class="rangeValue" id="playerAttackBarHeightDisplay">6px</span></div></div>
          <div class="formrow"><label>Bar offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="playerAttackBarOffsetX" min="-500" max="500" value="0"></label><label><span>V</span><input type="number" id="playerAttackBarOffsetY" min="-500" max="500" value="0"></label></div></div>
          <div class="subhint">Status icons</div>
          <div class="formrow rangeRow"><label for="playerIconWidth">Icon width</label><div class="rangeWrap"><input type="number" id="playerIconWidth" min="0" max="200" value="24"><span class="rangeValue" id="playerIconWidthDisplay">24px</span></div></div>
          <div class="formrow rangeRow"><label for="playerIconHeight">Icon height</label><div class="rangeWrap"><input type="number" id="playerIconHeight" min="0" max="200" value="24"><span class="rangeValue" id="playerIconHeightDisplay">24px</span></div></div>
          <div class="formrow"><label>Icon offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="playerIconOffsetX" min="-500" max="500" value="12"></label><label><span>V</span><input type="number" id="playerIconOffsetY" min="-500" max="500" value="0"></label></div></div>
          <div class="subhint">Player states</div>
          <div class="playerStateConfigList" id="playerStateConfig" aria-live="polite"></div>
        </div>

        <!-- Practice Dummy -->
        <button class="btn" data-settings-genre="core" id="btnPracticeDummy" data-icon="🛡️" title="Practice dummy settings">
          Practice Dummy <span class="hint">Target tuning…</span>
        </button>
        <div class="submenu" id="practiceDummyPane">
          <div class="formrow">
            <label>Placement</label>
            <div class="rangeWrap">
              <button class="formButton" id="practiceDummyMove" type="button">Move dummy</button>
              <button class="formButton" id="practiceDummyReset" type="button">Reset dummy</button>
              <button class="formButton" id="practiceDummyRemove" type="button" disabled>Remove dummy</button>
            </div>
          </div>
          <div class="formrow" id="practiceDummyDeathRow">
            <label for="practiceDummyDeathResponse">On death</label>
            <select id="practiceDummyDeathResponse">
              <option value="respawn">Respawn in place</option>
              <option value="despawn">Despawn until replaced</option>
            </select>
          </div>
          <div class="formrow rangeRow"><label for="practiceDummySize">Dummy size</label><div class="rangeWrap"><input type="number" id="practiceDummySize" min="20" max="400" value="120"><span class="rangeValue" id="practiceDummySizeDisplay">120px</span></div></div>
          <div class="subhint">Dummy inherits player health bar styling and status icons.</div>
        </div>

        <!-- Prayers -->
        <button class="btn" data-settings-genre="core" id="btnPrayers" data-icon="🙏" title="Protection prayers">
          Prayers <span class="hint">Toggle protections…</span>
        </button>
        <div class="submenu" id="prayerPane">
          <div class="subhint">Only one protection prayer can be active at a time.</div>
          <div class="playerStateConfigList" id="prayerList" aria-live="polite"></div>
        </div>

        <!-- Monsters -->
        <button class="btn" data-settings-genre="moba" id="btnMonsters" data-icon="👾" title="Monster settings">
          Monsters <span class="hint">Raid guardian…</span>
        </button>
        <div class="submenu" id="monsterPane">
          <div class="formrow"><label>Placement</label><div class="rangeWrap"><button class="formButton" id="monsterMove" type="button">Move monster</button></div></div>
          <div class="formrow"><label for="monsterAggroRadius">Aggro radius (px)</label><input type="number" id="monsterAggroRadius" min="0" max="5000" value="420"></div>
          <div class="formrow"><label for="monsterSize">Body size (px)</label><input type="number" id="monsterSize" min="40" max="400" value="140"></div>
          <div class="formrow"><label for="monsterMaxHp">Monster health</label><input type="number" id="monsterMaxHp" min="1" max="100000" value="5000"></div>
          <div class="formrow"><label for="monsterProjectileDamage">Projectile damage</label><input type="number" id="monsterProjectileDamage" min="0" max="10000" value="120"></div>
          <div class="formrow"><label for="monsterCastInterval">Ability cadence (sec)</label><input type="number" step="0.1" id="monsterCastInterval" min="0.5" max="30" value="3"></div>
          <div class="formrow"><label for="monsterQueueSize">Queue preview (spells)</label><input type="number" id="monsterQueueSize" min="1" max="6" value="3"></div>
          <div class="formrow"><label for="monsterSlotSpin">Spin time (sec)</label><input type="number" step="0.1" id="monsterSlotSpin" min="0" max="10" value="1.2"></div>
          <div class="formrow"><label for="monsterSlotReveal">Show color time (sec)</label><input type="number" step="0.1" id="monsterSlotReveal" min="0" max="10" value="0.6"></div>
          <div class="subhint">A slot machine above the boss spins before each cast. Each player in range is targeted separately.</div>
          <div class="formrow"><label for="monsterFreezeDuration">Blue freeze (sec)</label><input type="number" step="0.1" id="monsterFreezeDuration" min="0" max="10" value="1.5"></div>
          <div class="formrow"><label for="monsterSpeedBoostPct">Red speed boost (%)</label><input type="number" step="1" id="monsterSpeedBoostPct" min="0" max="500" value="25"></div>
          <div class="formrow"><label for="monsterHealAmount">Green heal</label><input type="number" step="1" id="monsterHealAmount" min="0" max="10000" value="200"></div>
          <div class="subhint">Configure the emojis used for both monster telegraphs and protection prayers.</div>
          <div class="formrow"><label for="monsterIconGreen">Green emoji</label><input type="text" id="monsterIconGreen" maxlength="6" value="🟢"></div>
          <div class="formrow"><label for="monsterIconBlue">Blue emoji</label><input type="text" id="monsterIconBlue" maxlength="6" value="🔵"></div>
          <div class="formrow"><label for="monsterIconRed">Red emoji</label><input type="text" id="monsterIconRed" maxlength="6" value="🔴"></div>
        </div>

        <!-- Camera -->
        <button class="btn" data-settings-genre="core" id="btnCamera" data-icon="🎥" title="Camera settings" data-help-title="Camera options" data-help-text="Tune how the tactical camera follows your champion and how you scout the battlefield.">
          Camera <span class="hint">Follow behavior...</span>
        </button>
        <div class="submenu" id="cameraPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="cameraConfigLoad" type="button">Load setup</button><button class="formButton" id="cameraConfigSave" type="button">Save setup</button></div></div>
          <input id="cameraConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow" data-help-title="Camera mode" data-help-text="Switch between locked, semi-locked, or completely free camera movement.">
            <label for="cameraMode">Camera mode</label>
            <select id="cameraMode">
              <option value="locked">Locked</option>
              <option value="semi">Semi-locked</option>
              <option value="free">Unlocked</option>
            </select>
          </div>
          <div class="formrow rangeRow" data-help-title="Follow responsiveness" data-help-text="Control how quickly the camera catches up to your champion after they move.">
            <label for="cameraFollowLag">Follow responsiveness</label>
            <div class="rangeWrap">
              <input type="number" id="cameraFollowLag" min="0" max="200" value="0">
              <span class="rangeValue" id="cameraFollowLagDisplay">Instant</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Forward offset" data-help-text="Bias the camera slightly in the direction of motion so you can see more of the threats ahead.">
            <label for="cameraLead">Forward offset</label>
            <div class="rangeWrap">
              <input type="number" id="cameraLead" min="0" max="3000" value="0">
              <span class="rangeValue" id="cameraLeadDisplay">0px</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Horizontal offset" data-help-text="Shift the camera left or right relative to your champion using a percentage of the current view width.">
            <label for="cameraHorizontalOffset">Horizontal offset</label>
            <div class="rangeWrap">
              <input type="number" id="cameraHorizontalOffset" min="-100" max="100" value="0">
              <span class="rangeValue" id="cameraHorizontalOffsetDisplay">Centered</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Vertical offset" data-help-text="Shift the camera up or down relative to your champion using a percentage of the current view height.">
            <label for="cameraVerticalOffset">Vertical offset</label>
            <div class="rangeWrap">
              <input type="number" id="cameraVerticalOffset" min="-100" max="100" value="0">
              <span class="rangeValue" id="cameraVerticalOffsetDisplay">Centered</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Edge scroll margin" data-help-text="Set how close to the screen edge the mouse must be before the camera begins panning. Set to zero to disable edge scroll.">
            <label for="cameraEdgeMargin">Edge scroll margin</label>
            <div class="rangeWrap">
              <input type="number" id="cameraEdgeMargin" min="0" max="3000" value="0">
              <span class="rangeValue" id="cameraEdgeMarginDisplay">0px</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Edge scroll speed" data-help-text="How fast the camera travels while edge scrolling is active.">
            <label for="cameraEdgeSpeed">Edge scroll speed</label>
            <div class="rangeWrap">
              <input type="number" id="cameraEdgeSpeed" min="0" max="3000" step="10" value="0">
              <span class="rangeValue" id="cameraEdgeSpeedDisplay">Off</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Recentering delay" data-help-text="How long the camera keeps your manual offset before easing back toward your champion in semi-locked mode.">
            <label for="cameraRecenterDelay">Recentering delay</label>
            <div class="rangeWrap">
              <input type="number" id="cameraRecenterDelay" min="0" max="1000" step="10" value="0">
              <span class="rangeValue" id="cameraRecenterDelayDisplay">0s</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Semi-lock leash" data-help-text="Limit how far the camera can drift off your champion before it softly reels back in. Set to zero for unlimited drift.">
            <label for="cameraManualLeash">Semi-lock leash</label>
            <div class="rangeWrap">
              <input type="number" id="cameraManualLeash" min="0" max="3000" step="10" value="0">
              <span class="rangeValue" id="cameraManualLeashDisplay">Unlimited</span>
            </div>
          </div>
          <div class="formrow rangeRow" data-help-title="Zoom level" data-help-text="Adjust the tactical camera zoom. Lower values pull out for a wider view; higher values zoom in.">
            <label for="cameraZoom">Zoom level</label>
            <div class="rangeWrap">
              <input type="number" id="cameraZoom" min="0" max="500" value="100">
              <span class="rangeValue" id="cameraZoomDisplay">100%</span>
            </div>
          </div>
          <div class="formrow" data-help-title="Lock zooming in" data-help-text="Prevent the camera from zooming in closer than the current level." data-setting-id="camera.zoomInLock" data-setting-type="boolean" data-setting-tags="camera,zoom" data-setting-aliases="zoom lock,lock zoom in" data-setting-section="Zoom" data-setting-control="cameraZoomInLock">
            <label for="cameraZoomInLock">Zoom in lock</label>
            <button type="button" class="formButton" id="cameraZoomInLock">Unlocked</button>
          </div>
          <div class="formrow" data-help-title="Lock zooming out" data-help-text="Prevent the camera from zooming out farther than the current level." data-setting-id="camera.zoomOutLock" data-setting-type="boolean" data-setting-tags="camera,zoom" data-setting-aliases="zoom lock,lock zoom out" data-setting-section="Zoom" data-setting-control="cameraZoomOutLock">
            <label for="cameraZoomOutLock">Zoom out lock</label>
            <button type="button" class="formButton" id="cameraZoomOutLock">Unlocked</button>
          </div>
          <div class="formrow rangeRow" data-help-title="Zoom wheel sensitivity" data-help-text="Adjust how strong the zoom wheel feels. Set to zero to disable wheel zooming altogether.">
            <label for="cameraWheelSensitivity">Zoom wheel sensitivity</label>
            <div class="rangeWrap">
              <input type="number" id="cameraWheelSensitivity" min="0" max="40" value="20">
              <span class="rangeValue" id="cameraWheelSensitivityDisplay">20%/step</span>
            </div>
          </div>
          <div class="formrow" data-help-title="Camera lock key" data-help-text="Press this key to toggle between your locked view and your preferred free mode.">
            <label for="cameraLockBind">Camera lock key</label>
            <button type="button" class="formButton" id="cameraLockBind">Space</button>
          </div>
          <div class="formrow" data-help-title="Quick recenter" data-help-text="Snap the camera back to your champion immediately.">
            <label for="cameraRecenterBtn">Quick recenter</label>
            <button type="button" class="formButton" id="cameraRecenterBtn">Recenter now</button>
          </div>
          <div class="subhint" data-help-title="Camera tips" data-help-text="Hover the camera controls to learn how each option changes the tactical view.">Drag with the middle mouse button or use edge scrolling to scout. Press the lock key to snap back.</div>
        </div>

        <!-- Animation -->
        <button class="btn" data-settings-genre="core" id="btnAnimation" data-icon="🎞️" title="Animation settings">
          Animation <span class="hint">Player model…</span>
        </button>
        <div class="submenu" id="animationPane">
          <button class="subbtn" id="btnPlayerAnimation" type="button">Create player animation</button>
          <div class="playerAnimationSection" id="playerAnimationSection" hidden>
            <div class="playerAnimationButtons">
              <button class="formButton" id="btnPlayerAnimationLoad" type="button">Load .fbx</button>
              <button class="formButton" id="btnPlayerAnimationLoadGlb" type="button">Load .glb</button>
              <button class="formButton" id="btnPlayerAnimationMixamoCombine" type="button">Mixamo animation combinator</button>
              <button class="formButton" id="btnPlayerAnimationLoadSetup" type="button">Load setup</button>
              <button class="formButton" id="btnPlayerAnimationSave" type="button">Save setup</button>
              <button class="formButton" id="btnPlayerAnimationClear" type="button">Clear model</button>
            </div>
            <input id="playerAnimationFile" type="file" accept=".fbx,.glb" />
            <input id="playerAnimationConfigFile" type="file" accept="application/json,.json" style="display:none" />
            <input id="playerMixamoBaseFile" type="file" accept=".fbx" style="display:none" />
            <input id="playerMixamoAnimationFiles" type="file" accept=".fbx" style="display:none" multiple />
            <div class="playerAnimationStatus" id="playerAnimationStatus">No player model loaded.</div>
            <div class="playerAnimationStage" id="playerAnimationStage" aria-live="polite">
              <canvas id="playerAnimationCanvas"></canvas>
              <div class="playerAnimationDrop" id="playerAnimationDrop">Drop .fbx or .glb file to load</div>
            </div>
            <div class="playerAnimationViewControls" aria-label="Player animation viewport controls">
              <div class="formrow playerAnimationScaleRow">
                <label for="playerAnimationScaleRange">Model scale</label>
                <div class="rangeWrap">
                  <input id="playerAnimationScaleRange" type="number" min="0.01" max="1000" step="0.01" value="1" />
                  <input id="playerAnimationScaleInput" type="number" min="0.01" max="1000" step="0.01" value="1" />
                </div>
              </div>
              <div class="formrow playerAnimationOffsetRow">
                <label for="playerAnimationOffsetHorizontalInput">Horizontal offset (px)</label>
                <input id="playerAnimationOffsetHorizontalInput" type="number" min="-1000" max="1000" step="1" value="0" />
              </div>
              <div class="formrow playerAnimationOffsetRow">
                <label for="playerAnimationOffsetVerticalInput">Vertical offset (px)</label>
                <input id="playerAnimationOffsetVerticalInput" type="number" min="-1000" max="1000" step="1" value="0" />
              </div>
              <div class="formrow playerAnimationLightRow">
                <label for="playerAnimationLightAngleRange">Lighting angle (°)</label>
                <div class="rangeWrap">
                  <input id="playerAnimationLightAngleRange" type="number" min="0" max="360" step="1" value="45" />
                  <input id="playerAnimationLightAngleInput" type="number" min="0" max="360" step="1" value="45" />
                </div>
              </div>
            </div>
            <div class="playerAnimationActions" id="playerAnimationActions">
              <div class="playerAnimationActionBlock" data-action="idle">
                <label for="playerAnimationAction-idle">Idle</label>
                <select id="playerAnimationAction-idle" data-action="idle"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Idle animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-idle-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-idle-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-idle-start">Start frame</label>
                      <input id="playerAnimationAction-idle-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-idle-end">End frame</label>
                      <input id="playerAnimationAction-idle-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="playerAnimationActionBlock" data-action="move">
                <label for="playerAnimationAction-move">Move</label>
                <select id="playerAnimationAction-move" data-action="move"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Move animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-move-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-move-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-move-start">Start frame</label>
                      <input id="playerAnimationAction-move-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-move-end">End frame</label>
                      <input id="playerAnimationAction-move-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="playerAnimationActionBlock" data-action="autoAttack">
                <label for="playerAnimationAction-attack">Auto attack</label>
                <select id="playerAnimationAction-attack" data-action="autoAttack"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Auto attack animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-attack-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-attack-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-attack-start">Start frame</label>
                      <input id="playerAnimationAction-attack-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-attack-end">End frame</label>
                      <input id="playerAnimationAction-attack-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="playerAnimationActionBlock" data-action="cast">
                <label for="playerAnimationAction-cast">Cast spell</label>
                <select id="playerAnimationAction-cast" data-action="cast"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Cast spell animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-cast-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-cast-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-cast-start">Start frame</label>
                      <input id="playerAnimationAction-cast-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-cast-end">End frame</label>
                      <input id="playerAnimationAction-cast-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="playerAnimationActionBlock" data-action="death">
                <label for="playerAnimationAction-death">Death</label>
                <select id="playerAnimationAction-death" data-action="death"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Death animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-death-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-death-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-death-start">Start frame</label>
                      <input id="playerAnimationAction-death-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-death-end">End frame</label>
                      <input id="playerAnimationAction-death-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="playerAnimationActionBlock" data-action="taunt">
                <label for="playerAnimationAction-taunt">Taunt</label>
                <select id="playerAnimationAction-taunt" data-action="taunt"><option value="">—</option></select>
                <div class="playerAnimationActionSettings" aria-label="Taunt animation options">
                  <div class="playerAnimationActionSetting">
                    <label for="playerAnimationAction-taunt-speed">Speed (0–5×)</label>
                    <input id="playerAnimationAction-taunt-speed" type="number" min="0" max="5" step="0.1" value="1" inputmode="decimal" />
                  </div>
                  <div class="playerAnimationActionSettingsRow">
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-taunt-start">Start frame</label>
                      <input id="playerAnimationAction-taunt-start" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                    <div class="playerAnimationActionSetting">
                      <label for="playerAnimationAction-taunt-end">End frame</label>
                      <input id="playerAnimationAction-taunt-end" type="number" min="0" step="1" inputmode="numeric" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <div class="playerAnimationStatus">Material colors</div>
              <div class="playerAnimationMaterials" id="playerAnimationMaterials"></div>
            </div>
          </div>
          <div class="subhint">Assign clips to player actions. Press T in-game to trigger the taunt animation.</div>
        </div>

        <!-- Cursor -->
        <button class="btn" data-settings-genre="core" id="btnCursor" data-icon="🖱️" title="Pointer customization">
          Cursor <span class="hint">Pointer highlights…</span>
        </button>
        <div class="submenu" id="cursorPane">
          <div class="formrow"><label>Custom cursor</label><div class="rangeWrap"><button class="formButton" id="cursorToggle" type="button">Disabled</button></div></div>
          <div class="formrow"><label for="cursorEmoji">Cursor icon</label><input id="cursorEmoji" type="text" inputmode="text" maxlength="4" value="🎯"></div>
          <div class="formrow"><label>Hover outline</label><div class="rangeWrap"><button class="formButton" id="cursorOutlineToggle" type="button">Enabled</button></div></div>
          <div class="formrow"><label for="cursorHoverColor">Hover color</label><input id="cursorHoverColor" type="color" value="#7fe3ff"></div>
          <div class="subhint">Shows a custom cursor on the stage and outlines interactive enemies under your pointer.</div>
        </div>

        <!-- Pings -->
        <button class="btn" data-settings-genre="core" id="btnPings" data-icon="📢" title="Quick map pings">
          Pings <span class="hint">Alert your team…</span>
        </button>
        <div class="submenu" id="pingPane">
          <div class="formrow"><label for="pingOnMyWay">On my way</label><div class="rangeWrap"><input id="pingOnMyWay" type="text" inputmode="text" maxlength="4" value="🏃"><button class="formButton" id="pingOnMyWayTrigger" type="button">Drop ping</button></div></div>
          <div class="formrow"><label for="pingEnemyMissing">Enemy missing</label><div class="rangeWrap"><input id="pingEnemyMissing" type="text" inputmode="text" maxlength="4" value="❓"><button class="formButton" id="pingEnemyMissingTrigger" type="button">Drop ping</button></div></div>
          <div class="formrow"><label for="pingAssistMe">Assist me</label><div class="rangeWrap"><input id="pingAssistMe" type="text" inputmode="text" maxlength="4" value="🆘"><button class="formButton" id="pingAssistMeTrigger" type="button">Drop ping</button></div></div>
          <div class="formrow"><label for="pingTarget">Target call</label><div class="rangeWrap"><input id="pingTarget" type="text" inputmode="text" maxlength="4" value="🎯"><button class="formButton" id="pingTargetTrigger" type="button">Drop ping</button></div></div>
          <div class="subhint">Pings use your cursor’s last position. Adjust the emoji to personalize each alert.</div>
        </div>

        <!-- Keybinds -->
        <button class="btn" data-settings-genre="core" id="btnKeybinds" data-icon="⌨" title="Spell casting keybinds">
          Keybinds <span class="hint">Casting modifiers…</span>
        </button>
        <div class="submenu" id="keybindPane">
          <div class="formrow"><label for="spellCastDefault">Default spell cast type</label><select id="spellCastDefault"><option value="quick">Quick cast (default)</option><option value="normal">Normal cast</option><option value="quickIndicator">Quick cast with indicator</option><option value="none">None</option></select></div>
          <div class="formrow"><label>Normal cast modifier</label><button type="button" class="formButton" id="spellCastNormalBind">—</button></div>
          <div class="subhint">Hold to preview a skill shot, then press again or left-click to confirm. Right-click cancels.</div>
          <div class="formrow"><label>Quick cast modifier</label><button type="button" class="formButton" id="spellCastQuickBind">—</button></div>
          <div class="subhint">Hold to force abilities to fire instantly on key press.</div>
          <div class="formrow"><label>Quick indicator modifier</label><button type="button" class="formButton" id="spellCastIndicatorBind">—</button></div>
          <div class="subhint">Hold to preview the indicator, then release the ability key to cast.</div>
          <div class="formrow"><label>Attack move key</label><button type="button" class="formButton" id="attackMoveBind">A</button></div>
          <div class="subhint">Issue an attack move toward your cursor and target the closest enemy automatically.</div>
          <div class="formrow"><label>Ping wheel key</label><button type="button" class="formButton" id="pingWheelBind">G</button></div>
          <div class="subhint">Hold to open the ping wheel, then drag toward a direction to choose a ping.</div>
        </div>

        <!-- Ability bar -->
        <button class="btn" data-settings-genre="core" id="btnAbilityBar" data-icon="✦" title="Ability bar settings">
          Ability Bar <span class="hint">Configure HUDâ€¦</span>
        </button>
        <div class="submenu" id="abilityPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="abilityConfigLoad" type="button">Load setup</button><button class="formButton" id="abilityConfigSave" type="button">Save setup</button></div></div>
          <input id="abilityConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="abilityBarState.count">Number of abilities (0â€“20)</label><input type="number" id="abilityBarState.count" min="0" max="20" value="20"></div>
          <div class="formrow"><label for="abilityBarState.scale">Ability bar size (0â€“4Ã—)</label><input type="number" id="abilityBarState.scale" min="0" max="4" step="0.1" value="1"></div>
          <div class="formrow"><label for="abilityBarState.orientation">Ability bar orientation</label><select id="abilityBarState.orientation"><option value="horizontal">Horizontal</option><option value="vertical">Vertical</option></select></div>
          <div class="formrow"><label for="abilityBarState.healthPlacement.horizontal">Health bar position (horizontal)</label><select id="abilityBarState.healthPlacement.horizontal"><option value="bottom" selected>Bottom</option><option value="top">Top</option></select></div>
          <div class="formrow"><label for="abilityBarState.healthPlacement.vertical">Health bar position (vertical)</label><select id="abilityBarState.healthPlacement.vertical"><option value="right" selected>Right</option><option value="left">Left</option></select></div>
          <div class="formrow"><label for="abilityBarState.healthPlacement.textVertical">Health text (vertical)</label><select id="abilityBarState.healthPlacement.textVertical"><option value="top" selected>Above bar</option><option value="bottom">Below bar</option></select></div>
          <div class="formrow"><label for="abilityBarState.statsPlacementVertical">Stats panel position (vertical)</label><select id="abilityBarState.statsPlacementVertical"><option value="top" selected>Top</option><option value="bottom">Bottom</option></select></div>
          <div class="formrow"><label for="abilityTunables.spellSpeedScale">Spell speed multiplier (0â€“10Ã—)</label><input type="number" id="abilityTunables.spellSpeedScale" min="0" max="10" step="0.1" value="1"></div>
          <div class="formrow"><label for="abilityTunables.spellSizeScale">Spell size multiplier (0â€“10Ã—)</label><input type="number" id="abilityTunables.spellSizeScale" min="0" max="10" step="0.1" value="1"></div>
          <button class="subbtn" id="btnSaveSpells" type="button">Save spell configs</button>
          <div class="subhint">Set how many slots appear on the HUD and scale their size. A size of 0 hides the bar.</div>
        </div>

        <!-- Minimap -->
        <button class="btn" data-settings-genre="core" id="btnMinimap" data-icon="🗺️" title="Minimap settings">
          Minimap <span class="hint">Map overview…</span>
        </button>
        <div class="submenu" id="minimapPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="minimapConfigLoad" type="button">Load setup</button><button class="formButton" id="minimapConfigSave" type="button">Save setup</button></div></div>
          <input id="minimapConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="minimapScale">Minimap size (0â€“5Ã—)</label><input type="number" id="minimapScale" min="0" max="5" step="0.1" value="1"></div>
          <div class="formrow"><label for="minimapClickToMove">Click-to-move orders</label><select id="minimapClickToMove"><option value="enabled" selected>Enabled</option><option value="disabled">Disabled</option></select></div>
          <div class="formrow"><label for="minimapClickThrough">Click-through</label><select id="minimapClickThrough"><option value="blocked" selected>Blocked</option><option value="allow">Allow</option></select></div>
          <div class="subhint">Set the minimap scale. A value of 0 hides it entirely.</div>
          <div class="subhint">Disable click-to-move to prevent issuing orders from the minimap, or allow click-through so stage clicks pass beneath it.</div>
        </div>

        <!-- Gold -->
        <button class="btn" data-settings-genre="moba" id="btnGold" data-icon="&#x1F4B0;" title="Gold settings">
          Gold <span class="hint">Economy tuning...</span>
        </button>
        <div class="submenu" id="goldPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="goldConfigLoad" type="button">Load setup</button><button class="formButton" id="goldConfigSave" type="button">Save setup</button></div></div>
          <input id="goldConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="goldState.perSecond">Passive gold (per second, 0â€“100)</label><input type="number" id="goldState.perSecond" min="0" max="100" step="0.1" value="15"></div>
          <div class="formrow"><label for="goldState.perKill">Gold per execute (0â€“100)</label><input type="number" id="goldState.perKill" min="0" max="100" value="0"></div>
          <div class="subhint">Earn passive gold while the timer runs. Executing a minion with the final blow grants bonus gold.</div>
        </div>

        <!-- Score SETTINGS ONLY (no live score numbers here) -->
        <button class="btn" data-settings-genre="moba" id="btnScore" data-icon="ðŸ†" title="Score settings">
          Score Rules <span class="hint">Points & target</span>
        </button>
        <div class="submenu" id="scorePane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="scoreConfigLoad" type="button">Load setup</button><button class="formButton" id="scoreConfigSave" type="button">Save setup</button></div></div>
          <input id="scoreConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="formrow"><label for="scoreState.pointsPer">Points per minion (1â€“10)</label><input type="number" id="scoreState.pointsPer" min="1" max="10" value="1"></div>
          <div class="formrow"><label for="scoreState.winTarget">Score to win (1â€“1000)</label><input type="number" id="scoreState.winTarget" min="1" max="1000" value="50"></div>
          <button class="subbtn" id="resetScore">Reset scores</button>
          <div class="subhint">A team earns points when its minion enters the <b>opponentâ€™s</b> portal.</div>
        </div>

        <!-- UI Layout -->
        <button class="btn" data-settings-genre="core" id="btnUiLayout" data-icon="🧭" title="UI layout settings">
          UI Layout <span class="hint">Arrange HUD…</span>
        </button>
        <div class="submenu" id="uiLayoutPane">
          <div class="formrow"><label>Configuration</label><div class="rangeWrap"><button class="formButton" id="uiLayoutConfigLoad" type="button">Load setup</button><button class="formButton" id="uiLayoutConfigSave" type="button">Save setup</button></div></div>
          <input id="uiLayoutConfigFile" type="file" accept="application/json,.json" style="display:none" />
          <div class="subhint">Assign HUD widgets to one of nine anchors or hide them.</div>
          <div class="formrow"><label for="uiSlotGold">Gold counter</label><select id="uiSlotGold"></select></div>
          <div class="formrow"><label for="uiSlotScore">Score display</label><select id="uiSlotScore"></select></div>
          <div class="formrow"><label for="uiSlotTimer">Game timer</label><select id="uiSlotTimer"></select></div>
          <div class="formrow"><label for="uiSlotAbility">Ability & stats dock</label><select id="uiSlotAbility"></select></div>
          <div class="formrow"><label for="uiSlotMinimap">Minimap</label><select id="uiSlotMinimap"></select></div>
          <div class="subhint">Offsets shift anchors horizontally (H) and vertically (V) up to 500px.</div>
          <div class="formrow"><label>Top Left offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetTopLeftX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetTopLeftY" min="-500" max="500" value="16"></label></div></div>
          <div class="formrow"><label>Top Middle offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetTopMiddleX" min="-500" max="500" value="0"></label><label><span>V</span><input type="number" id="uiOffsetTopMiddleY" min="-500" max="500" value="16"></label></div></div>
          <div class="formrow"><label>Top Right offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetTopRightX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetTopRightY" min="-500" max="500" value="16"></label></div></div>
          <div class="formrow"><label>Center Left offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetCenterLeftX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetCenterLeftY" min="-500" max="500" value="0"></label></div></div>
          <div class="formrow"><label>Center Middle offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetCenterMiddleX" min="-500" max="500" value="0"></label><label><span>V</span><input type="number" id="uiOffsetCenterMiddleY" min="-500" max="500" value="0"></label></div></div>
          <div class="formrow"><label>Center Right offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetCenterRightX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetCenterRightY" min="-500" max="500" value="0"></label></div></div>
          <div class="formrow"><label>Bottom Left offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetBottomLeftX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetBottomLeftY" min="-500" max="500" value="16"></label></div></div>
          <div class="formrow"><label>Bottom Middle offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetBottomMiddleX" min="-500" max="500" value="0"></label><label><span>V</span><input type="number" id="uiOffsetBottomMiddleY" min="-500" max="500" value="16"></label></div></div>
          <div class="formrow"><label>Bottom Right offset</label><div class="offsetGroup"><label><span>H</span><input type="number" id="uiOffsetBottomRightX" min="-500" max="500" value="16"></label><label><span>V</span><input type="number" id="uiOffsetBottomRightY" min="-500" max="500" value="16"></label></div></div>
        </div>

        <div class="settingHelp" id="settingHelp" role="status" aria-live="polite">
          <span class="settingHelpTitle" id="settingHelpTitle">Settings</span>
          <span class="settingHelpBody" id="settingHelpBody">Hover a control to learn what it does.</span>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="stage" id="stage">
        <div class="view" id="view">
          <img id="hitbox" alt="Hitbox map" src="" aria-hidden="true" />
          <img id="map" alt="Map" src="" />
          <canvas id="layer" width="1920" height="1080"></canvas>
          <div class="playerModelAnchor" id="playerModelAnchor" data-active="false">
            <canvas id="playerModelCanvas" class="playerModelCanvas" width="256" height="256"></canvas>
          </div>
          <div class="playerFloatHud" id="playerFloatHud" data-team="blue" aria-hidden="true">
            <div class="playerHpBadge" id="playerHpBadge"><span class="hpIcon">❤️</span><span class="hpValue" id="playerHpValue">1000</span></div>
            <div class="playerPrayerIcons" id="playerPrayerIcons" aria-hidden="true"></div>
            <div class="playerFloatTrack" id="playerFloatTrack">
              <div class="playerFloatFill" id="playerFloatFill"></div>
              <div class="playerFloatText" id="playerFloatText" aria-hidden="true"></div>
            </div>
            <div class="playerAttackReadyBar is-disabled" id="playerAttackReadyBar" aria-hidden="true">
              <div class="playerAttackReadyFill" id="playerAttackReadyFill"></div>
            </div>
            <div class="playerStateIcons" id="playerStateIcons" aria-hidden="true"></div>
          </div>
          <div class="playerFloatHud" id="practiceDummyHud" data-team="red" aria-hidden="true">
            <div class="playerFloatTrack">
              <div class="playerFloatFill" id="practiceDummyFill"></div>
              <div class="playerFloatText" id="practiceDummyText">1000</div>
            </div>
            <div class="playerAttackReadyBar is-disabled" id="practiceDummyAttackBar" aria-hidden="true" hidden>
              <div class="playerAttackReadyFill" id="practiceDummyAttackFill"></div>
            </div>
            <div class="playerStateIcons" id="practiceDummyIcons" aria-hidden="true"></div>
          </div>
          <div class="playerFloatHud monsterHud" id="monsterHud" aria-hidden="true">
            <div class="playerFloatTrack">
              <div class="playerFloatFill" id="monsterFill"></div>
              <div class="playerFloatText" id="monsterText">0</div>
            </div>
            <div class="monsterAbilityQueue" id="monsterAbilityQueue" aria-hidden="true"></div>
          </div>
        </div>
    <div class="stageCursor" id="stageCursor" data-visible="false"><span id="stageCursorIcon">🎯</span></div>
    <div class="hudOverlay" id="hudOverlay">
      <div class="scoreOverlay" id="scoreOverlay" aria-live="polite">
            <div class="scoreTeam"><span class="pill blue"></span><span>Blue</span><span class="scoreVal" id="scoreBlue">0</span></div>
            <div>â€”</div>
            <div class="scoreTeam"><span class="pill red"></span><span>Red</span><span class="scoreVal" id="scoreRed">0</span></div>
          </div>
          <div class="timer" id="timer">00:00</div>
          <div class="hudCornerGroup" id="hudCornerGroup">
            <div class="goldCounter" id="goldCounter" aria-live="polite">🪙 <span id="goldValue">0</span></div>
          </div>
          <div class="hudStatsAnchor" id="hudStatsAnchor" data-stage-ignore-click="true">
            <div class="hudStatsAbilityGroup" id="hudStatsAbilityGroup">
              <div class="hudStatsDock" id="hudStatsDock" data-collapsed="false">
                <button type="button" class="hudStatsToggle" id="hudStatsToggle" aria-label="Collapse stats" aria-expanded="true" aria-controls="hudStatsContent">
                  <span class="hudStatsToggleIcon" aria-hidden="true">◀</span>
                </button>
                <div class="hudStatsPanel" id="hudStatsPanel" aria-live="polite">
                  <div class="hudStatsContent" id="hudStatsContent">
                    <div class="hudStat" title="Attack speed">
                      <span class="hudStatLabel">as</span>
                      <span class="hudStatValue" id="hudAs">1.00s</span>
                    </div>
                    <div class="hudStat" title="Attack windup">
                      <span class="hudStatLabel">aw</span>
                      <span class="hudStatValue" id="hudAw">0.25s</span>
                    </div>
                    <div class="hudStat" title="Attack range">
                      <span class="hudStatLabel">ar</span>
                      <span class="hudStatValue" id="hudAr">200</span>
                    </div>
                    <div class="hudStat" title="Damage">
                      <span class="hudStatLabel">dmg</span>
                      <span class="hudStatValue" id="hudDmg">10</span>
                    </div>
                    <div class="hudStat" title="Movement speed">
                      <span class="hudStatLabel">ms</span>
                      <span class="hudStatValue" id="hudMs">240</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="hudAbilityDock" id="hudAbilityDock">
                <div class="hudAbilityStack" id="hudAbilityStack">
                  <div class="hudAbilityBarWrap" id="hudAbilityBarWrap">
                    <div class="abilityBar" id="abilityBar" aria-hidden="true" role="group"></div>
                  </div>
                  <div class="hudAbilityVitals" id="hudAbilityVitalsWrap">
                    <div class="hudVitals" id="hudVitals" data-team="blue" aria-live="polite">
                      <div class="hudVitalsBar" id="hudVitalsBar">
                        <div class="hudHealthFill" id="hudHpFill"></div>
                        <div class="hudHpText" id="hudHpText">1000 / 1000</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="abilityRepo" id="abilityRepo" aria-hidden="true" role="dialog" aria-modal="false" data-stage-ignore-click="true">
            <div class="abilityRepoHeader">
              <div>
                <div class="abilityRepoTitle">Spell Repository</div>
                <div class="abilityRepoSubtitle" id="abilityRepoSubtitle">Select a spell to assign.</div>
              </div>
              <button type="button" class="abilityRepoClose" id="abilityRepoClose" aria-label="Close spell repository">&times;</button>
            </div>
            <div class="abilityRepoBody">
              <div class="spellList" id="spellList" role="listbox" aria-label="Available spells"></div>
              <div class="spellEditor" id="spellEditor">
                <div class="spellEditorPlaceholder" id="spellEditorPlaceholder">Right-click a spell to edit its attributes.</div>
                <div class="spellEditorForm" id="spellEditorForm" hidden></div>
              </div>
            </div>
          </div>
          <div class="winBanner" id="winBanner">Blue wins!</div>
          <canvas id="minimap" width="220" height="220" aria-hidden="true" data-stage-ignore-click="true"></canvas>
        </div>
      </div>
    </main>
    <button class="sb-fab" id="sbFab" aria-label="Open menu">
      <span class="sb-fab-icon" aria-hidden="true"></span>
    </button>
  </div>

  <div class="settingsSearchOverlay" id="settingsSearch" data-open="false" aria-hidden="true">
    <div class="settingsSearchDialog" role="dialog" aria-modal="true" aria-labelledby="settingsSearchLabel">
      <div class="settingsSearchHeader">
        <div class="settingsSearchInputWrap">
          <label class="settingsSearchInputLabel" id="settingsSearchLabel" for="settingsSearchInput">Search settings</label>
          <input id="settingsSearchInput" class="settingsSearchInput" type="text" placeholder="Search settings…" autocomplete="off" spellcheck="false" role="combobox" aria-expanded="false" aria-controls="settingsSearchResults" aria-autocomplete="list" />
        </div>
        <button type="button" class="settingsSearchHelpButton" id="settingsSearchHelpBtn" aria-haspopup="dialog" aria-controls="settingsSearchHelp" aria-label="Show search tips">?</button>
      </div>
      <div class="settingsSearchFacets" id="settingsSearchFacets" aria-live="polite"></div>
      <div class="settingsSearchBody">
        <div class="settingsSearchResults" id="settingsSearchResults" role="listbox" aria-labelledby="settingsSearchLabel"></div>
        <div class="settingsSearchEmpty" id="settingsSearchEmpty" hidden>
          <div class="settingsSearchEmptyPrimary" id="settingsSearchEmptyPrimary">No settings found.</div>
          <div class="settingsSearchEmptySecondary" id="settingsSearchEmptySecondary">Try different keywords or add a filter like <code>tag:camera</code>.</div>
          <button type="button" class="settingsSearchAskBtn" id="settingsSearchAskBtn">Ask for help</button>
        </div>
      </div>
      <div class="settingsSearchFooter">
        <div class="settingsSearchStatus" id="settingsSearchStatus" aria-live="polite"></div>
        <div class="settingsSearchRecents" id="settingsSearchRecents" aria-label="Recent queries"></div>
      </div>
    </div>
    <div class="settingsSearchHelp" id="settingsSearchHelp" hidden role="dialog" aria-modal="false" aria-labelledby="settingsSearchHelpTitle">
      <div class="settingsSearchHelpHeader">
        <div class="settingsSearchHelpTitle" id="settingsSearchHelpTitle">Search tips</div>
        <button type="button" class="settingsSearchHelpClose" id="settingsSearchHelpClose" aria-label="Close search tips">×</button>
      </div>
      <div class="settingsSearchHelpBody">
        <p>Find any setting in under a second. Use filters to narrow results:</p>
        <ul>
          <li><code>tag:camera</code>, <code>tag:minions</code>, <code>tag:recall</code></li>
          <li><code>type:number</code>, <code>type:boolean</code>, <code>scope:map</code></li>
          <li><code>experimental:true</code> to surface prototypes</li>
        </ul>
        <p>Typos are forgiven—try <code>recal tiem</code>. Arrow keys move, <kbd>Enter</kbd> opens, <kbd>Alt+Enter</kbd> toggles booleans.</p>
      </div>
    </div>
  </div>

    <script type="module" src="./src/main.js"></script>
</body>
</html>



